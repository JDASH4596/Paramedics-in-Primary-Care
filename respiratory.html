<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Respiratory ‚Äì Paramedics in Primary Care</title>

<style>
body {
  font-family: Arial, sans-serif;
  margin: 20px;
}

a.home {
  display: inline-block;
  margin-bottom: 15px;
  text-decoration: none;
  color: #1e88e5;
  font-weight: bold;
}

/* GRID */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 15px;
}

.card {
  border: 1px solid #ccc;
  border-radius: 10px;
  padding: 15px;
  cursor: pointer;
  background: #f9f9f9;
}

.card:hover {
  background: #eef4ff;
}

.card h3 {
  margin: 0 0 6px 0;
}

.card p {
  margin: 0;
  font-size: 0.9em;
  color: #555;
}

/* WINDOW */
.window {
  position: absolute;
  top: 120px;
  left: 120px;
  background: white;
  max-width: 420px;
  width: 90%;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.25);
  z-index: 1000;
}

.window-header {
  padding: 10px;
  background: #1e88e5;
  color: white;
  cursor: move;
  border-radius: 10px 10px 0 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  user-select: none;
}

.window-body {
  padding: 15px;
}

.close {
  cursor: pointer;
}

/* CONTENT */
.guideline-box {
  background: #f1f8ff;
  padding: 10px;
  border-radius: 8px;
  margin-bottom: 10px;
  white-space: pre-wrap;
}

.editor {
  display: none;
  margin-top: 10px;
}

textarea {
  width: 100%;
  height: 220px;
}

button {
  margin-top: 6px;
}
</style>
</head>

<body>

<a class="home" href="index.html">‚¨Ö Home</a>

<h1>Respiratory</h1>
<p>Paramedics in Primary Care</p>

<div class="grid">

  <div class="card" onclick="openWindow('asthma')">
    <h3>üí® Asthma</h3>
    <p>Wheeze ‚Ä¢ Tight chest ‚Ä¢ Reversible airway disease</p>
  </div>

  <div class="card" onclick="openWindow('virusrti')">
    <h3>ü§ß Viral RTI</h3>
    <p>Runny nose ‚Ä¢ Sore throat ‚Ä¢ Headache</p>
  </div>

  <div class="card" onclick="openWindow('bronchitis')">
    <h3>ü´Å Bronchitis</h3>
    <p>Post-viral productive cough ‚Ä¢ No focal signs</p>
  </div>

  <div class="card" onclick="openWindow('copd')">
    <h3>ü´Å COPD Exacerbation</h3>
    <p>Breathlessness ‚Ä¢ Sputum change ‚Ä¢ Smoking history</p>
  </div>

  <div class="card" onclick="openWindow('pneumonia')">
    <h3>ü¶† Pneumonia</h3>
    <p>Fever ‚Ä¢ Pleuritic pain ‚Ä¢ Focal crackles</p>
  </div>

  <div class="card" onclick="openWindow('pe')">
    <h3>ü©∏ Pulmonary Embolism</h3>
    <p>Sudden SOB ‚Ä¢ Pleuritic pain ‚Ä¢ Tachycardia</p>
  </div>

  <div class="card" onclick="openWindow('pneumothorax')">
    <h3>üéà Pneumothorax</h3>
    <p>Sudden chest pain ‚Ä¢ Reduced air entry</p>
  </div>

  <div class="card" onclick="openWindow('hf')">
    <h3>üíî Heart Failure</h3>
    <p>Orthopnoea ‚Ä¢ Peripheral oedema ‚Ä¢ Weight gain</p>
  </div>

</div>

<script>
let zIndexCounter = 1000;

const defaultAsthmaText = `TREATMENT (PRIMARY CARE)

‚Ä¢ MART inhaler with spacer
‚Ä¢ Check inhaler technique
‚Ä¢ Consider oral steroids if exacerbation
‚Ä¢ Arrange asthma review

GUIDELINES

NICE CKS ‚Äì Asthma
https://cks.nice.org.uk/topics/asthma/
`;

function openWindow(type) {

  const content = {
    asthma: `
      <h3>Asthma</h3>
      <div class="guideline-box" id="asthmaDisplay"></div>
      <button onclick="showEditor(this)">‚úèÔ∏è Edit</button>
      <div class="editor">
        <textarea></textarea>
        <button onclick="saveAsthma(this)">üíæ Save</button>
      </div>
    `,
    virusrti: `
      <h3>Viral RTI</h3>
      <ul>
        <li>Rhinorrhoea</li>
        <li>Sore throat</li>
        <li>Headache</li>
        <li>Mild fever</li>
      </ul>
      <a href="https://cks.nice.org.uk/topics/common-cold/" target="_blank">NICE CKS</a>
    `,
    bronchitis: `
      <h3>Bronchitis</h3>
      <ul>
        <li>Persistent productive cough</li>
        <li>Often post-viral</li>
        <li>No focal chest signs</li>
      </ul>
      <a href="https://cks.nice.org.uk/topics/acute-bronchitis/" target="_blank">NICE CKS</a>
    `,
    copd: `
      <h3>COPD Exacerbation</h3>
      <ul>
        <li>Increased breathlessness</li>
        <li>Change in sputum</li>
        <li>Smoking history</li>
      </ul>
      <a href="https://cks.nice.org.uk/topics/chronic-obstructive-pulmonary-disease/" target="_blank">NICE CKS</a>
    `,
    pneumonia: `
      <h3>Pneumonia</h3>
      <ul>
        <li>High fever</li>
        <li>Pleuritic chest pain</li>
        <li>Focal crackles</li>
      </ul>
      <a href="https://cks.nice.org.uk/topics/pneumonia-adults/" target="_blank">NICE CKS</a>
    `,
    pe: `
      <h3>Pulmonary Embolism</h3>
      <ul>
        <li>Sudden dyspnoea</li>
        <li>Pleuritic pain</li>
        <li>Tachycardia</li>
      </ul>
      <a href="https://cks.nice.org.uk/topics/pulmonary-embolism/" target="_blank">NICE CKS</a>
    `,
    pneumothorax: `
      <h3>Pneumothorax</h3>
      <ul>
        <li>Sudden chest pain</li>
        <li>Reduced air entry</li>
      </ul>
      <a href="https://cks.nice.org.uk/topics/pneumothorax/" target="_blank">NICE CKS</a>
    `,
    hf: `
      <h3>Heart Failure</h3>
      <ul>
        <li>Orthopnoea</li>
        <li>Peripheral oedema</li>
        <li>Weight gain</li>
      </ul>
      <a href="https://cks.nice.org.uk/topics/heart-failure/" target="_blank">NICE CKS</a>
    `
  };

  const win = document.createElement("div");
  win.className = "window";
  win.style.zIndex = ++zIndexCounter;

  win.innerHTML = `
    <div class="window-header">
      ${type.toUpperCase()}
      <span class="close" onclick="this.closest('.window').remove()">‚úñ</span>
    </div>
    <div class="window-body">${content[type]}</div>
  `;

  document.body.appendChild(win);
  makeDraggable(win);

  if (type === "asthma") {
    win.querySelector("#asthmaDisplay").textContent =
      localStorage.getItem("asthmaText") || defaultAsthmaText;
  }
}

function showEditor(btn) {
  const editor = btn.nextElementSibling;
  editor.style.display = "block";
  editor.querySelector("textarea").value =
    localStorage.getItem("asthmaText") || defaultAsthmaText;
}

function saveAsthma(btn) {
  const editor = btn.parentElement;
  const text = editor.querySelector("textarea").value;
  localStorage.setItem("asthmaText", text);
  editor.previousElementSibling.textContent = text;
  editor.style.display = "none";
}

/* DRAGGING */
function makeDraggable(win) {
  const header = win.querySelector(".window-header");
  let offsetX = 0, offsetY = 0, dragging = false;

  header.addEventListener("mousedown", e => {
    dragging = true;
    win.style.zIndex = ++zIndexCounter;
    offsetX = e.clientX - win.offsetLeft;
    offsetY = e.clientY - win.offsetTop;
    document.body.style.userSelect = "none";
  });

  document.addEventListener("mousemove", e => {
    if (!dragging) return;
    win.style.left = (e.clientX - offsetX) + "px";
    win.style.top = (e.clientY - offsetY) + "px";
  });

  document.addEventListener("mouseup", () => {
    dragging = false;
    document.body.style.userSelect = "auto";
  });
}
</script>

</body>
</html>








