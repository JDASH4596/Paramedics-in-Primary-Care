<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Respiratory ‚Äì Paramedics in Primary Care</title>

<style>
body { font-family: Arial, sans-serif; margin: 20px; }

a.home {
  display: inline-block; margin-bottom: 15px; text-decoration: none;
  color: #1e88e5; font-weight: bold;
}

/* GRID */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 15px;
}

.card {
  border: 1px solid #ccc;
  border-radius: 10px;
  padding: 15px;
  cursor: pointer;
  background: #f9f9f9;
}

.card:hover { background: #eef4ff; }

.card h3 { margin: 0 0 6px 0; }
.card p  { margin: 0; font-size: 0.9em; color: #555; }

/* WINDOWS */
.window {
  position: absolute;
  top: 120px;
  left: 120px;
  background: white;
  max-width: 520px;
  width: 92%;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.25);
  z-index: 1000;
}

.window-header {
  padding: 10px;
  background: #1e88e5;
  color: white;
  cursor: move;
  border-radius: 10px 10px 0 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  user-select: none;
}

.window-body { padding: 15px; }

.close { cursor: pointer; }

.guideline-box {
  background: #f1f8ff;
  padding: 10px;
  border-radius: 8px;
  margin: 10px 0;
  white-space: pre-wrap;
}

.editor { display: none; margin-top: 10px; }

textarea { width: 100%; height: 240px; }

button { margin-top: 6px; margin-right: 6px; padding: 6px 10px; }

.small-note { font-size: 0.85em; color: #444; margin: 0 0 8px 0; }
.status-pill {
  display: inline-block;
  font-size: 0.8em;
  padding: 3px 8px;
  border-radius: 999px;
  background: #eee;
  margin-left: 6px;
}
</style>
</head>

<body>

<a class="home" href="index.html">‚¨Ö Home</a>

<h1>Respiratory</h1>
<p>Paramedics in Primary Care</p>

<div class="grid">

  <div class="card" onclick="openWindow('asthma')">
    <h3>üí® Asthma</h3>
    <p>Wheeze ‚Ä¢ Tight chest ‚Ä¢ Reversible airway disease</p>
  </div>

  <div class="card" onclick="openWindow('virusrti')">
    <h3>ü§ß Viral RTI</h3>
    <p>Runny nose ‚Ä¢ Sore throat ‚Ä¢ Headache</p>
  </div>

  <div class="card" onclick="openWindow('bronchitis')">
    <h3>ü´Å Bronchitis</h3>
    <p>Post-viral productive cough ‚Ä¢ No focal signs</p>
  </div>

  <div class="card" onclick="openWindow('copd')">
    <h3>ü´Å COPD Exacerbation</h3>
    <p>Breathlessness ‚Ä¢ Sputum change ‚Ä¢ Smoking history</p>
  </div>

  <div class="card" onclick="openWindow('pneumonia')">
    <h3>ü¶† Pneumonia</h3>
    <p>Fever ‚Ä¢ Pleuritic pain ‚Ä¢ Focal crackles</p>
  </div>

  <div class="card" onclick="openWindow('pe')">
    <h3>ü©∏ Pulmonary Embolism</h3>
    <p>Sudden SOB ‚Ä¢ Pleuritic pain ‚Ä¢ Tachycardia</p>
  </div>

  <div class="card" onclick="openWindow('pneumothorax')">
    <h3>üéà Pneumothorax</h3>
    <p>Sudden chest pain ‚Ä¢ Reduced air entry</p>
  </div>

  <div class="card" onclick="openWindow('hf')">
    <h3>üíî Heart Failure</h3>
    <p>Orthopnoea ‚Ä¢ Peripheral oedema ‚Ä¢ Weight gain</p>
  </div>

</div>

<script>
let zIndexCounter = 1000;

/* ===== ASTHMA DEFAULT (YOUR WORDING) ===== */
const defaultAsthmaText = `DEFINITION
Inflammatory condition of the airways which result in narrowing during exacerbation causing a wheeze

SIGNS AND SYMPTOMS
‚Ä¢ Increased respiratory rate
‚Ä¢ Feeling tight chested
‚Ä¢ Increase inhaler use
‚Ä¢ Peak flow depends on the severity of the asthma.

TREATMENT
‚Ä¢ 40mg prednisolone if wheeze chest.
‚Ä¢ Consider how much the patient has been using the inhaler.
‚Ä¢ Make clinical judgement.
‚Ä¢ Remember: most exacerbations are viral but check for clinical signs of LRTI such as focal chest sounds, reduced SpO2 and fever.
‚Ä¢ Consider referring to the patient's individual asthma plan and consider the patient's last respiratory review - they may need another review

GUIDELINES
NICE CKS ‚Äì Asthma
https://cks.nice.org.uk/topics/asthma/

BTS / SIGN Asthma Guideline
https://www.brit-thoracic.org.uk/quality-improvement/guidelines/asthma/
`;

function openWindow(type) {
  const content = {
    asthma: `
      <h3>Asthma <span id="asthmaStatus" class="status-pill"></span></h3>
      <p class="small-note">Tip: you can open multiple windows and drag them side-by-side to compare.</p>

      <div class="guideline-box" id="asthmaDisplay"></div>

      <button onclick="showEditor(this)">‚úèÔ∏è Edit</button>
      <button onclick="resetAsthma(this)">‚Ü© Reset to default</button>

      <div class="editor">
        <textarea></textarea><br>
        <button onclick="saveAsthma(this)">üíæ Save</button>
        <button onclick="cancelEdit(this)">Cancel</button>
      </div>
    `,
    virusrti: `
      <h3>Viral RTI</h3>
      <ul>
        <li>Rhinorrhoea</li><li>Sore throat</li><li>Headache</li><li>Mild fever</li>
      </ul>
      <a href="https://cks.nice.org.uk/topics/common-cold/" target="_blank">NICE CKS ‚Äì Common Cold</a>
    `,
    bronchitis: `
      <h3>Bronchitis</h3>
      <ul>
        <li>Persistent productive cough</li><li>Often post-viral</li><li>No focal chest signs</li>
      </ul>
      <a href="https://cks.nice.org.uk/topics/acute-bronchitis/" target="_blank">NICE CKS ‚Äì Acute Bronchitis</a>
    `,
    copd: `
      <h3>COPD Exacerbation</h3>
      <ul>
        <li>Increased breathlessness</li><li>Change in sputum</li><li>Smoking history</li>
      </ul>
      <a href="https://cks.nice.org.uk/topics/chronic-obstructive-pulmonary-disease/" target="_blank">NICE CKS ‚Äì COPD</a>
    `,
    pneumonia: `
      <h3>Pneumonia</h3>
      <ul>
        <li>High fever</li><li>Pleuritic chest pain</li><li>Focal crackles</li>
      </ul>
      <a href="https://cks.nice.org.uk/topics/pneumonia-adults/" target="_blank">NICE CKS ‚Äì Pneumonia (Adults)</a>
    `,
    pe: `
      <h3>Pulmonary Embolism</h3>
      <ul>
        <li>Sudden dyspnoea</li><li>Pleuritic pain</li><li>Tachycardia</li>
      </ul>
      <a href="https://cks.nice.org.uk/topics/pulmonary-embolism/" target="_blank">NICE CKS ‚Äì Pulmonary Embolism</a>
    `,
    pneumothorax: `
      <h3>Pneumothorax</h3>
      <ul>
        <li>Sudden chest pain</li><li>Reduced air entry</li>
      </ul>
      <a href="https://cks.nice.org.uk/topics/pneumothorax/" target="_blank">NICE CKS ‚Äì Pneumothorax</a>
    `,
    hf: `
      <h3>Heart Failure</h3>
      <ul>
        <li>Orthopnoea</li><li>Peripheral oedema</li><li>Weight gain</li>
      </ul>
      <a href="https://cks.nice.org.uk/topics/heart-failure/" target="_blank">NICE CKS ‚Äì Heart Failure</a>
    `
  };

  const win = document.createElement("div");
  win.className = "window";
  win.style.zIndex = ++zIndexCounter;

  win.innerHTML = `
    <div class="window-header">
      ${type.toUpperCase()}
      <span class="close" onclick="this.closest('.window').remove()">‚úñ</span>
    </div>
    <div class="window-body">${content[type]}</div>
  `;

  document.body.appendChild(win);
  makeDraggable(win);

  if (type === "asthma") renderAsthma(win);
}

function renderAsthma(win) {
  const saved = localStorage.getItem("asthmaText");
  const display = win.querySelector("#asthmaDisplay");
  const status = win.querySelector("#asthmaStatus");

  if (saved && saved.trim().length > 0) {
    display.textContent = saved;
    status.textContent = "showing SAVED version";
  } else {
    display.textContent = defaultAsthmaText;
    status.textContent = "showing DEFAULT version";
  }
}

/* ===== ASTHMA FREE TEXT EDITOR ===== */
function showEditor(btn) {
  const win = btn.closest(".window");
  const editor = win.querySelector(".editor");
  editor.style.display = "block";
  editor.querySelector("textarea").value =
    localStorage.getItem("asthmaText") || defaultAsthmaText;
}

function saveAsthma(btn) {
  const win = btn.closest(".window");
  const editor = win.querySelector(".editor");
  const text = editor.querySelector("textarea").value;
  localStorage.setItem("asthmaText", text);
  editor.style.display = "none";
  renderAsthma(win);
}

function cancelEdit(btn) {
  const win = btn.closest(".window");
  win.querySelector(".editor").style.display = "none";
}

function resetAsthma(btn) {
  const win = btn.closest(".window");
  localStorage.removeItem("asthmaText");
  win.querySelector(".editor").style.display = "none";
  renderAsthma(win);
}

/* ===== DRAGGING (no text highlighting while dragging) ===== */
function makeDraggable(win) {
  const header = win.querySelector(".window-header");
  let offsetX = 0, offsetY = 0, dragging = false;

  header.addEventListener("mousedown", e => {
    dragging = true;
    win.style.zIndex = ++zIndexCounter;
    offsetX = e.clientX - win.offsetLeft;
    offsetY = e.clientY - win.offsetTop;
    document.body.style.userSelect = "none";
  });

  document.addEventListener("mousemove", e => {
    if (!dragging) return;
    win.style.left = (e.clientX - offsetX) + "px";
    win.style.top = (e.clientY - offsetY) + "px";
  });

  document.addEventListener("mouseup", () => {
    dragging = false;
    document.body.style.userSelect = "auto";
  });
}
</script>

</body>
</html>









