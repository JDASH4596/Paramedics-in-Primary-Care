<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Respiratory ‚Äì Paramedics in Primary Care</title>

<style>
body {
  font-family: Arial, sans-serif;
  margin: 20px;
}

a.home {
  display: inline-block;
  margin-bottom: 15px;
  text-decoration: none;
  color: #1e88e5;
  font-weight: bold;
}

/* GRID */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
  gap: 15px;
}

.card {
  border: 1px solid #ccc;
  border-radius: 10px;
  padding: 15px;
  cursor: pointer;
  background: #f9f9f9;
}

.card h3 {
  margin: 0 0 5px 0;
}

.card p {
  margin: 0;
  font-size: 0.9em;
  color: #555;
}

.card:hover {
  background: #eef4ff;
}

/* MODAL OVERLAY */
.modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.4);
}

/* MODAL WINDOW */
.modal-content {
  position: absolute;
  top: 80px;
  left: 50%;
  transform: translateX(-50%);
  background: white;
  max-width: 800px;
  width: 92%;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}

/* DRAG BAR */
.modal-header {
  padding: 10px;
  cursor: move;
  background: #1e88e5;
  color: white;
  border-radius: 10px 10px 0 0;
  font-weight: bold;
}

.close {
  float: right;
  cursor: pointer;
}

/* MODAL BODY */
.modal-body {
  padding: 20px;
}

/* GUIDELINE DISPLAY */
.guideline-box {
  background: #f1f8ff;
  padding: 12px;
  border-radius: 8px;
  white-space: pre-wrap;
  margin-bottom: 10px;
}

/* EDITOR */
.editor {
  display: none;
  margin-top: 10px;
}

textarea {
  width: 100%;
  height: 260px;
  font-family: Arial, sans-serif;
}

button {
  margin-top: 8px;
  padding: 6px 10px;
}
</style>
</head>

<body>

<a class="home" href="index.html">‚¨Ö Home</a>

<h1>Respiratory</h1>
<p>Paramedics in Primary Care</p>

<!-- CONDITION TILES -->
<div class="grid">

  <div class="card" onclick="openCondition('asthma')">
    <h3>üí® Asthma</h3>
    <p>Wheeze ‚Ä¢ Tight chest ‚Ä¢ Reversible airway disease</p>
  </div>

  <div class="card" onclick="openCondition('virusrti')">
    <h3>ü§ß Viral RTI</h3>
    <p>Runny nose ‚Ä¢ Sore throat ‚Ä¢ Mild illness</p>
  </div>

  <div class="card" onclick="openCondition('bronchitis')">
    <h3>ü´Å Bronchitis</h3>
    <p>Post-viral productive cough</p>
  </div>

  <div class="card" onclick="openCondition('copd')">
    <h3>ü´Å COPD Exacerbation</h3>
    <p>Chronic airflow limitation ‚Ä¢ Smokers</p>
  </div>

  <div class="card" onclick="openCondition('pneumonia')">
    <h3>ü¶† Pneumonia</h3>
    <p>Fever ‚Ä¢ Crackles ‚Ä¢ Chest infection</p>
  </div>

  <div class="card" onclick="openCondition('pe')">
    <h3>ü©∏ Pulmonary Embolism</h3>
    <p>Sudden SOB ‚Ä¢ Pleuritic pain</p>
  </div>

  <div class="card" onclick="openCondition('pneumothorax')">
    <h3>üéà Pneumothorax</h3>
    <p>Sudden chest pain ‚Ä¢ Reduced air entry</p>
  </div>

  <div class="card" onclick="openCondition('hf')">
    <h3>üíî Heart Failure</h3>
    <p>Orthopnoea ‚Ä¢ Oedema ‚Ä¢ Fluid overload</p>
  </div>

</div>

<!-- MODAL -->
<div id="popup" class="modal">
  <div id="modalBox" class="modal-content">
    <div id="modalHeader" class="modal-header">
      Respiratory
      <span class="close" onclick="closePopup()">‚úñ</span>
    </div>
    <div id="popupContent" class="modal-body"></div>
  </div>
</div>

<script>
/* DEFAULT ASTHMA FREE-TEXT */
const defaultAsthmaText = `TREATMENT (PRIMARY CARE)

‚Ä¢ MART inhaler with a spacer ‚Äì follow asthma care plan
‚Ä¢ Check inhaler technique with a spacer
‚Ä¢ Consider a short course of oral steroids if exacerbation:
  ‚Äì Tight chest
  ‚Äì Increased SABA / MART use
  ‚Äì Use clinical judgement if chest is clear
‚Ä¢ Consider asthma review if exacerbated or due

GUIDELINES

NICE CKS ‚Äì Asthma
https://cks.nice.org.uk/topics/asthma/

BTS / SIGN Asthma Guideline
https://www.brit-thoracic.org.uk/quality-improvement/guidelines/asthma/
`;

function openCondition(name) {

  const info = {

    asthma: `
      <h2>Asthma</h2>
      <p>Reversible inflammatory airway disease.</p>

      <div id="asthmaDisplay" class="guideline-box"></div>

      <button onclick="showEditor()">‚úèÔ∏è Edit guidance</button>

      <div id="editor" class="editor">
        <textarea id="editorText"></textarea><br>
        <button onclick="saveAsthma()">üíæ Save</button>
        <button onclick="cancelEdit()">Cancel</button>
      </div>
    `,

    virusrti: `
      <h2>Viral RTI</h2>
      <ul>
        <li>Rhinorrhoea</li>
        <li>Sore throat</li>
        <li>Headache</li>
        <li>Mild fever</li>
      </ul>
      <p><strong>Guidelines:</strong></p>
      <a href="https://cks.nice.org.uk/topics/common-cold/" target="_blank">NICE CKS ‚Äì Common Cold</a>
    `,

    bronchitis: `
      <h2>Bronchitis</h2>
      <ul>
        <li>Persistent productive cough</li>
        <li>Often post-viral</li>
        <li>No focal chest signs</li>
      </ul>
      <p><strong>Guidelines:</strong></p>
      <a href="https://cks.nice.org.uk/topics/acute-bronchitis/" target="_blank">NICE CKS ‚Äì Acute Bronchitis</a>
    `,

    copd: `
      <h2>COPD Exacerbation</h2>
      <ul>
        <li>Increased breathlessness</li>
        <li>Change in sputum</li>
        <li>Smoking history</li>
      </ul>
      <p><strong>Guidelines:</strong></p>
      <a href="https://cks.nice.org.uk/topics/chronic-obstructive-pulmonary-disease/" target="_blank">NICE CKS ‚Äì COPD</a>
    `,

    pneumonia: `
      <h2>Pneumonia</h2>
      <ul>
        <li>High fever</li>
        <li>Pleuritic chest pain</li>
        <li>Focal crackles</li>
      </ul>
      <p><strong>Guidelines:</strong></p>
      <a href="https://cks.nice.org.uk/topics/pneumonia-adults/" target="_blank">NICE CKS ‚Äì Pneumonia (Adults)</a>
    `,

    pe: `
      <h2>Pulmonary Embolism</h2>
      <ul>
        <li>Sudden dyspnoea</li>
        <li>Pleuritic pain</li>
        <li>Tachycardia</li>
      </ul>
      <p><strong>Guidelines:</strong></p>
      <a href="https://cks.nice.org.uk/topics/pulmonary-embolism/" target="_blank">NICE CKS ‚Äì Pulmonary Embolism</a>
    `,

    pneumothorax: `
      <h2>Pneumothorax</h2>
      <ul>
        <li>Sudden chest pain</li>
        <li>Reduced air entry</li>
      </ul>
      <p><strong>Guidelines:</strong></p>
      <a href="https://cks.nice.org.uk/topics/pneumothorax/" target="_blank">NICE CKS ‚Äì Pneumothorax</a>
    `,

    hf: `
      <h2>Heart Failure</h2>
      <ul>
        <li>Orthopnoea</li>
        <li>Peripheral oedema</li>
        <li>Weight gain</li>
      </ul>
      <p><strong>Guidelines:</strong></p>
      <a href="https://cks.nice.org.uk/topics/heart-failure/" target="_blank">NICE CKS ‚Äì Heart Failure</a>
    `
  };

  document.getElementById("popup").style.display = "block";
  document.getElementById("popupContent").innerHTML = info[name];
  document.getElementById("modalHeader").textContent = name.toUpperCase();

  if (name === "asthma") loadAsthma();
}

/* ASTHMA FREE-TEXT EDITOR */
function loadAsthma() {
  const text = localStorage.getItem("asthmaText") || defaultAsthmaText;
  document.getElementById("asthmaDisplay").textContent = text;
}

function showEditor() {
  document.getElementById("editor").style.display = "block";
  document.getElementById("editorText").value =
    localStorage.getItem("asthmaText") || defaultAsthmaText;
}

function saveAsthma() {
  localStorage.setItem("asthmaText", document.getElementById("editorText").value);
  loadAsthma();
  cancelEdit();
}

function cancelEdit() {
  document.getElementById("editor").style.display = "none";
}

function closePopup() {
  document.getElementById("popup").style.display = "none";
}

/* DRAGGABLE MODAL */
let isDragging = false, offsetX = 0, offsetY = 0;
const modal = document.getElementById("modalBox");
const header = document.getElementById("modalHeader");

header.addEventListener("mousedown", (e) => {
  isDragging = true;
  offsetX = e.clientX - modal.offsetLeft;
  offsetY = e.clientY - modal.offsetTop;
});

document.addEventListener("mousemove", (e) => {
  if (!isDragging) return;
  modal.style.left = (e.clientX - offsetX) + "px";
  modal.style.top = (e.clientY - offsetY) + "px";
  modal.style.transform = "none";
});

document.addEventListener("mouseup", () => {
  isDragging = false;
});
</script>

</body>
</html>





