<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Respiratory</title>

  <style>
    :root{
      --bg:#f4f6f8;
      --card:#ffffff;
      --text:#1c1c1c;
      --muted:#666;
      --shadow:0 10px 22px rgba(0,0,0,0.10);
      --shadow-soft:0 6px 16px rgba(0,0,0,0.08);
      --radius:16px;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    header{
      padding:18px 16px 10px;
    }

    .topbar{
      display:flex;
      align-items:center;
      gap:10px;
      margin-bottom:10px;
    }

    .logo{
      width:44px;
      height:44px;
      border-radius:10px;
      background:#e9eef5;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:900;
      color:#2b4a7a;
      user-select:none;
    }

    .home-link{
      display:inline-flex;
      align-items:center;
      gap:6px;
      text-decoration:none;
      color:#2b70c9;
      font-weight:800;
      margin:4px 0 10px;
      -webkit-tap-highlight-color: transparent;
    }

    h1{
      margin:0;
      font-size:32px;
      letter-spacing:-0.5px;
    }

    .subtitle{
      margin:6px 0 0;
      color:var(--muted);
      line-height:1.35;
    }

    .wrap{
      padding:0 16px 22px;
    }

    .tile-grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap:12px;
      margin-top:14px;
    }

    .tile{
      background:var(--card);
      border-radius:var(--radius);
      padding:14px 14px;
      box-shadow:var(--shadow-soft);
      border:1px solid rgba(0,0,0,0.04);
      text-decoration:none;
      color:inherit;
      cursor:pointer;
      transition:transform .12s ease, box-shadow .12s ease;
      min-height:74px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      -webkit-tap-highlight-color: transparent;
    }

    .tile:active{ transform: translateY(1px); }

    .tile-left{
      display:flex;
      flex-direction:column;
      gap:4px;
    }

    .tile-title{
      font-size:18px;
      font-weight:900;
      margin:0;
    }

    .tile-desc{
      margin:0;
      color:var(--muted);
      font-size:14px;
    }

    .tile-emoji{
      font-size:22px;
      width:38px;
      height:38px;
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius:12px;
      background:#f0f3f7;
      flex:0 0 auto;
    }

    /* ===== Modal overlay + box ===== */
    .modal-overlay{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.45);
      z-index:999;
      display:none;
      touch-action: manipulation;
    }

    .modal-box{
      position:fixed;
      left:0;
      right:0;
      bottom:0;
      width:100%;
      max-height:92vh;
      background:var(--card);
      border-radius:18px 18px 0 0;
      z-index:1000;
      transform:translateY(110%);
      transition:transform .22s ease;
      display:flex;
      flex-direction:column;
      box-shadow: var(--shadow);
      border-top:1px solid rgba(0,0,0,0.08);
    }

    .modal-box.open{ transform:translateY(0); }

    .modal-handle{
      width:44px;
      height:5px;
      background:#d3d7de;
      border-radius:999px;
      margin:10px auto 6px;
      flex:0 0 auto;
    }

    .modal-header{
      padding:10px 16px 8px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      border-bottom:1px solid rgba(0,0,0,0.06);
    }

    .modal-title{
      margin:0;
      font-size:18px;
      font-weight:900;
    }

    .close-btn{
      border:none;
      background:#f2f4f7;
      border-radius:12px;
      padding:10px 12px;
      font-weight:900;
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
    }

    .modal-content{
      padding:14px 16px 18px;
      overflow-y:auto;
      -webkit-overflow-scrolling:touch;
    }

    /* Section cards inside modal */
    .info-card{
      background:#f7f9fc;
      border:1px solid rgba(0,0,0,0.06);
      border-left:6px solid #cbd5e1;
      border-radius:14px;
      padding:12px 12px;
      margin:10px 0;
    }

    .info-card h3{
      margin:0 0 8px;
      font-size:14px;
      letter-spacing:0.4px;
      text-transform:uppercase;
      opacity:0.85;
    }

    .info-card ul{
      margin:0;
      padding-left:18px;
    }

    .info-card li{ margin:6px 0; }

    .def { border-left-color:#4a90e2; }
    .assess { border-left-color:#7ed321; }
    .manage { border-left-color:#f5a623; }
    .flags { border-left-color:#d0021b; }

    .guidelines a{
      color:#2b70c9;
      font-weight:900;
      text-decoration:none;
    }
    .guidelines a:hover{ text-decoration:underline; }

    /* Prevent sideways overflow */
    .modal-content, .info-card, .tile, header, .wrap { max-width:100%; }
  </style>
</head>

<body>
  <div id="top"></div>

  <header>
    <div class="topbar">
      <div class="logo">PIPC</div>
      <div style="font-weight:900;">PIPC</div>
    </div>

    <!-- Optional: if your home is index.html, keep this; otherwise edit/remove -->
    <a class="home-link" href="index.html">‚Üê Home</a>

    <h1>Respiratory</h1>
    <p class="subtitle">
      Tap a tile for details. On mobile the info opens in a screen-fitting box. Tap outside to close.
    </p>
  </header>

  <div class="wrap">
    <section class="tile-grid">

      <button class="tile" type="button" onclick="openCondition('Compare', compareBlock)">
        <div class="tile-left">
          <p class="tile-title">Compare</p>
          <p class="tile-desc">Fast side-by-side checks</p>
        </div>
        <div class="tile-emoji">üìä</div>
      </button>

      <button class="tile" type="button" onclick="openCondition('Asthma', asthmaBlock)">
        <div class="tile-left">
          <p class="tile-title">Asthma</p>
          <p class="tile-desc">Wheeze ‚Ä¢ tight chest</p>
        </div>
        <div class="tile-emoji">üí®</div>
      </button>

      <button class="tile" type="button" onclick="openCondition('Viral URTI', urtiBlock)">
        <div class="tile-left">
          <p class="tile-title">Viral URTI</p>
          <p class="tile-desc">Runny nose ‚Ä¢ sore throat</p>
        </div>
        <div class="tile-emoji">ü§í</div>
      </button>

      <button class="tile" type="button" onclick="openCondition('Acute Bronchitis', bronchitisBlock)">
        <div class="tile-left">
          <p class="tile-title">Acute Bronchitis</p>
          <p class="tile-desc">Post-viral cough</p>
        </div>
        <div class="tile-emoji">ü´Å</div>
      </button>

      <button class="tile" type="button" onclick="openCondition('COPD Exacerbation', copdBlock)">
        <div class="tile-left">
          <p class="tile-title">COPD Exacerbation</p>
          <p class="tile-desc">‚Üë breathlessness ‚Ä¢ sputum</p>
        </div>
        <div class="tile-emoji">üö¨</div>
      </button>

      <button class="tile" type="button" onclick="openCondition('Pneumonia', pneumoniaBlock)">
        <div class="tile-left">
          <p class="tile-title">Pneumonia</p>
          <p class="tile-desc">Fever ‚Ä¢ focal signs</p>
        </div>
        <div class="tile-emoji">ü©ª</div>
      </button>

      <button class="tile" type="button" onclick="openCondition('Pulmonary Embolism', peBlock)">
        <div class="tile-left">
          <p class="tile-title">Pulmonary Embolism</p>
          <p class="tile-desc">Sudden SOB ‚Ä¢ pleuritic pain</p>
        </div>
        <div class="tile-emoji">‚ö°</div>
      </button>

    </section>
  </div>

  <!-- ===== Modal overlay + box ===== -->
  <div id="modalOverlay" class="modal-overlay" aria-hidden="true"></div>

  <div id="modalBox" class="modal-box" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-handle"></div>

    <div class="modal-header">
      <h2 id="modalTitle" class="modal-title">Condition</h2>
      <button class="close-btn" type="button" onclick="closeModal()">Close</button>
    </div>

    <div class="modal-content" id="modalContent"></div>
  </div>

  <script>
    const overlay = document.getElementById('modalOverlay');
    const modal = document.getElementById('modalBox');
    const modalTitle = document.getElementById('modalTitle');
    const modalContent = document.getElementById('modalContent');

    function openCondition(title, html) {
      modalTitle.textContent = title;
      modalContent.innerHTML = html;

      overlay.style.display = 'block';
      overlay.setAttribute('aria-hidden', 'false');
      modal.classList.add('open');

      // Lock background scroll
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      modal.classList.remove('open');
      overlay.style.display = 'none';
      overlay.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
    }

    // Tap outside closes
    overlay.addEventListener('click', closeModal);

    // ESC closes (desktop)
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && modal.classList.contains('open')) closeModal();
    });

    // ===== Content blocks (EDIT THESE FREELY) =====

    const compareBlock = `
      <div class="info-card def">
        <h3>Quick Compare</h3>
        <ul>
          <li><b>Viral URTI:</b> Coryzal, sore throat, mild fever, chest usually clear</li>
          <li><b>Acute bronchitis:</b> Cough dominant, often post-viral, chest can have wheeze/rhonchi</li>
          <li><b>Pneumonia:</b> Fever, pleuritic pain, focal crackles, ‚Üë RR, low SpO‚ÇÇ</li>
          <li><b>Asthma/COPD:</b> Wheeze + tight chest / chronic background</li>
          <li><b>PE:</b> Sudden SOB, pleuritic pain, tachycardia, risk factors</li>
        </ul>
      </div>
      <div class="info-card flags">
        <h3>Always consider</h3>
        <ul>
          <li>SpO‚ÇÇ low, cyanosis, exhaustion, confusion</li>
          <li>Sepsis features / haemodynamic instability</li>
          <li>Chest pain with red flags</li>
        </ul>
      </div>
    `;

    const asthmaBlock = `
      <div class="info-card def">
        <h3>Definition</h3>
        <ul>
          <li>Airway inflammation with variable airflow obstruction; episodic wheeze/tight chest/cough.</li>
        </ul>
      </div>

      <div class="info-card assess">
        <h3>Quick Assessment</h3>
        <ul>
          <li>How breathless? speaking in sentences? exhaustion?</li>
          <li>RR/HR, SpO‚ÇÇ, work of breathing, chest auscultation</li>
          <li>Trigger/infection? how much reliever used?</li>
          <li>Consider LRTI signs: fever, focal sounds, reduced SpO‚ÇÇ</li>
          <li>Check inhaler technique + spacer use</li>
        </ul>
      </div>

      <div class="info-card manage">
        <h3>Management</h3>
        <ul>
          <li>Follow your local acute asthma guidance</li>
          <li>Safety net and arrange follow-up/asthma review after exacerbation</li>
          <li>Consider whether this is <b>not just asthma</b> (see below)</li>
        </ul>
      </div>

      <div class="info-card flags">
        <h3>Not Just Asthma (Differentials)</h3>
        <ul>
          <li>Fever + focal chest signs ‚Üí consider pneumonia</li>
          <li>Pleuritic chest pain + risk factors ‚Üí consider PE</li>
          <li>Orthopnoea + oedema + bibasal crackles ‚Üí consider HF</li>
          <li>Sudden unilateral reduced air entry ‚Üí consider pneumothorax</li>
        </ul>
      </div>

      <div class="info-card guidelines">
        <h3>Guidelines</h3>
        <ul>
          <li><a href="#" onclick="return false;">NICE CKS ‚Äì Asthma (edit link)</a></li>
          <li><a href="#" onclick="return false;">BTS/SIGN Asthma Guideline (edit link)</a></li>
        </ul>
      </div>
    `;

    const urtiBlock = `
      <div class="info-card def">
        <h3>Definition</h3>
        <ul>
          <li>Self-limiting viral infection (coryzal symptoms ¬± sore throat/cough).</li>
        </ul>
      </div>

      <div class="info-card assess">
        <h3>Quick Assessment</h3>
        <ul>
          <li>Duration, fever, hydration, comorbidities</li>
          <li>Chest symptoms: breathlessness, pleuritic pain</li>
          <li>Vitals: RR/HR/SpO‚ÇÇ if concern</li>
        </ul>
      </div>

      <div class="info-card manage">
        <h3>Management</h3>
        <ul>
          <li>Symptomatic care (fluids, rest, analgesia)</li>
          <li>Safety net: worsening breathlessness, persistent fever, chest pain</li>
        </ul>
      </div>

      <div class="info-card flags">
        <h3>Red Flags</h3>
        <ul>
          <li>SpO‚ÇÇ low, RR high, significant breathlessness</li>
          <li>Haemoptysis, pleuritic chest pain</li>
          <li>Sepsis features / immunocompromised deterioration</li>
        </ul>
      </div>
    `;

    const bronchitisBlock = `
      <div class="info-card def">
        <h3>Definition</h3>
        <ul>
          <li>Acute cough with lower respiratory tract features, usually viral/post-viral.</li>
        </ul>
      </div>

      <div class="info-card assess">
        <h3>Quick Assessment</h3>
        <ul>
          <li>Cough duration, sputum, wheeze, chest pain</li>
          <li>Vitals if unwell; SpO‚ÇÇ if breathless</li>
          <li>Exclude pneumonia: fever, focal signs, low SpO‚ÇÇ, tachypnoea</li>
        </ul>
      </div>

      <div class="info-card manage">
        <h3>Management</h3>
        <ul>
          <li>Self-care + reassurance (cough can last weeks)</li>
          <li>Consider bronchodilator trial if wheeze/bronchospasm (local guidance)</li>
          <li>Antibiotics usually not indicated unless criteria met (local guidance)</li>
        </ul>
      </div>

      <div class="info-card flags">
        <h3>Red Flags</h3>
        <ul>
          <li>SpO‚ÇÇ low, RR high, focal chest signs, persistent high fever</li>
          <li>Haemoptysis, severe pleuritic pain</li>
          <li>Frailty/significant comorbidity with deterioration</li>
        </ul>
      </div>
    `;

    const copdBlock = `
      <div class="info-card def">
        <h3>Definition</h3>
        <ul>
          <li>Acute worsening of COPD symptoms (breathlessness, cough, sputum change).</li>
        </ul>
      </div>

      <div class="info-card assess">
        <h3>Quick Assessment</h3>
        <ul>
          <li>Baseline vs current symptoms, triggers (infection)</li>
          <li>RR/HR/SpO‚ÇÇ, work of breathing, exhaustion</li>
          <li>Sputum volume/colour, fever, chest pain</li>
          <li>Consider pneumonia / PE if atypical</li>
        </ul>
      </div>

      <div class="info-card manage">
        <h3>Management</h3>
        <ul>
          <li>Follow local COPD exacerbation guidance</li>
          <li>Bronchodilators, steroids/antibiotics if indicated (local guidance)</li>
          <li>Safety net + arrange follow-up</li>
        </ul>
      </div>

      <div class="info-card flags">
        <h3>Red Flags</h3>
        <ul>
          <li>SpO‚ÇÇ low despite usual treatment / severe breathlessness</li>
          <li>Confusion, drowsiness, exhaustion</li>
          <li>Sepsis features / haemodynamic compromise</li>
        </ul>
      </div>
    `;

    const pneumoniaBlock = `
      <div class="info-card def">
        <h3>Definition</h3>
        <ul>
          <li>Lower respiratory infection with alveolar involvement; may present with focal signs.</li>
        </ul>
      </div>

      <div class="info-card assess">
        <h3>Quick Assessment</h3>
        <ul>
          <li>Fever/rigors, pleuritic pain, sputum, breathlessness</li>
          <li>RR/HR, SpO‚ÇÇ, BP, temperature</li>
          <li>Chest exam: focal crackles/bronchial breathing</li>
          <li>Risk: age, frailty, comorbidities</li>
        </ul>
      </div>

      <div class="info-card manage">
        <h3>Management</h3>
        <ul>
          <li>Follow local CAP guidance for antibiotics and disposition</li>
          <li>Safety net and review plan</li>
        </ul>
      </div>

      <div class="info-card flags">
        <h3>Red Flags</h3>
        <ul>
          <li>SpO‚ÇÇ low, RR high, hypotension, confusion</li>
          <li>Sepsis features / rapid deterioration</li>
          <li>Significant comorbidity or immunosuppression</li>
        </ul>
      </div>
    `;

    const peBlock = `
      <div class="info-card def">
        <h3>Definition</h3>
        <ul>
          <li>Thrombus in pulmonary vasculature causing ventilation-perfusion mismatch.</li>
        </ul>
      </div>

      <div class="info-card assess">
        <h3>Quick Assessment</h3>
        <ul>
          <li>Sudden SOB, pleuritic chest pain, haemoptysis, syncope</li>
          <li>HR, RR, SpO‚ÇÇ, BP; look for DVT signs</li>
          <li>Risk factors: recent immobility/surgery, cancer, previous VTE, OCP/HRT</li>
          <li>Use local pathway (e.g. Wells/PERC/D-dimer where applicable)</li>
        </ul>
      </div>

      <div class="info-card manage">
        <h3>Management</h3>
        <ul>
          <li>Urgent escalation if suspected PE with instability</li>
          <li>Follow local PE pathway for investigation/referral</li>
        </ul>
      </div>

      <div class="info-card flags">
        <h3>Red Flags</h3>
        <ul>
          <li>Haemodynamic instability, syncope, severe hypoxia</li>
          <li>Persistent tachycardia/tachypnoea with chest pain</li>
          <li>High clinical suspicion ‚Üí urgent assessment</li>
        </ul>
      </div>
    `;
  </script>
</body>
</html>