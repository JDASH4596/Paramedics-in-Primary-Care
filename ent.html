<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ENT ‚Äì PIPC</title>

<style>
  :root{
    --bg: #f3f5f8;
    --card: #ffffff;
    --text: #111827;
    --muted: #6b7280;
    --blue: #1e88e5;
    --border: #e5e7eb;
    --shadow: 0 6px 18px rgba(0,0,0,0.12);

    --danger-bg: #fff1f2;
    --danger-border: #fecdd3;
    --danger-text: #b91c1c;

    --sec-bg: #f1f8ff;
    --sec-border: #dbeafe;

    --sec2-bg: #f7f7ff;
    --sec2-border: #e0e7ff;

    --sec3-bg: #f6fffb;
    --sec3-border: #bbf7d0;
  }

  body{
    font-family: Arial, sans-serif;
    margin: 0;
    background: var(--bg);
    color: var(--text);
  }

  /* HEADER */
  .topbar{
    background: var(--card);
    border-bottom: 1px solid var(--border);
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
  }
  .topbar-inner{
    max-width: 1100px;
    margin: 0 auto;
    padding: 14px 16px;
    display: flex;
    align-items: center;
    gap: 14px;
  }
  .brand{
    display: flex;
    align-items: center;
    gap: 10px;
    text-decoration: none;
    color: inherit;
  }
  .brand img{ height: 44px; width: auto; display: block; }
  .brand-title{ font-weight: 900; letter-spacing: 0.2px; }
  .page-title{
    margin-left: auto;
    font-size: 1.05rem;
    font-weight: 900;
    color: #0f172a;
  }

  /* CONTENT */
  .wrap{
    max-width: 1100px;
    margin: 18px auto;
    padding: 0 16px 40px 16px;
  }
  .crumb{ margin: 8px 0 14px 0; }
  .crumb a{
    text-decoration: none;
    color: var(--blue);
    font-weight: 900;
  }
  h1{ margin: 6px 0 6px 0; font-size: 2.0rem; }
  p.sub{ margin: 0 0 18px 0; color: var(--muted); line-height: 1.4; }

  /* GRID */
  .grid{
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 14px;
  }

  .tile{
    position: relative;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 14px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    cursor: pointer;
    transition: transform 0.06s ease, box-shadow 0.12s ease;
  }
  .tile:hover{
    transform: translateY(-1px);
    box-shadow: 0 10px 22px rgba(0,0,0,0.08);
  }
  .tile h3{ margin: 0 0 6px 0; font-size: 1.06rem; }
  .tile p{ margin: 0; color: var(--muted); font-size: 0.92rem; }

  /* Subtle red flags pill */
  .flag-pill{
    position: absolute;
    top: 10px;
    right: 10px;
    border: 1px solid var(--danger-border);
    background: var(--danger-bg);
    color: var(--danger-text);
    font-weight: 900;
    font-size: 0.78rem;
    padding: 5px 8px;
    border-radius: 999px;
    cursor: pointer;
    user-select: none;
    transition: opacity 0.12s ease;
  }

  /* Desktop: hide until hover */
  @media (hover: hover) and (pointer: fine) {
    .flag-pill { opacity: 0; }
    .tile:hover .flag-pill { opacity: 1; }
  }
  /* Touch (iPhone): always visible */
  @media (hover: none) and (pointer: coarse) {
    .flag-pill { opacity: 1; }
  }

  /* WINDOWS */
  .window{
    position: fixed;
    top: 110px;
    left: 120px;
    width: min(860px, 92vw);
    background: var(--card);
    border-radius: 14px;
    box-shadow: var(--shadow);
    border: 1px solid var(--border);
    z-index: 1000;
  }
/* Mobile full-screen window fix */
@media (max-width: 640px) {
  .window{
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    max-height: 100vh;
    border-radius: 0;
  }

  .window-body{
    max-height: calc(100vh - 54px);
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
}
  .window-header{
    padding: 10px 12px;
    background: var(--blue);
    color: white;
    cursor: move;
    border-radius: 14px 14px 0 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    user-select: none;
    font-weight: 900;
  }

  .window-body{
    padding: 14px;
    max-height: 70vh;
    overflow-y: auto;
  }

  .close{
    cursor: pointer;
    font-weight: 900;
    padding: 2px 8px;
    border-radius: 8px;
    background: rgba(255,255,255,0.15);
  }

  /* SECTION CARDS */
  .section{
    border: 1px solid var(--sec-border);
    background: var(--sec-bg);
    border-radius: 12px;
    padding: 12px;
    margin: 10px 0;
  }
  .section.alt{
    border-color: var(--sec2-border);
    background: var(--sec2-bg);
  }
  .section.good{
    border-color: var(--sec3-border);
    background: var(--sec3-bg);
  }
  .section.danger{
    border-color: var(--danger-border);
    background: var(--danger-bg);
  }

  .section h4{
    margin: 0 0 8px 0;
    font-size: 0.95rem;
    letter-spacing: 0.2px;
    text-transform: uppercase;
  }

  .section ul{
    margin: 0;
    padding-left: 18px;
  }
  .section li{ margin: 6px 0; }

  .mini-note{
    margin-top: 8px;
    color: var(--muted);
    font-size: 0.9rem;
    line-height: 1.35;
  }
  .mini-note a{ color: var(--blue); font-weight: 900; text-decoration: none; }

  /* Image block */
  .img-wrap{
    background: white;
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
  }
  .img-wrap img{
    width: 100%;
    max-height: 320px;
    object-fit: contain;
    display: block;
    background: white;
  }

  /* Comparison tables */
  table.compare{
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
    font-size: 0.92rem;
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
    background: white;
  }
  .compare th{
    background: #e3f2fd;
    padding: 10px;
    text-align: left;
    font-weight: 900;
  }
  .compare td{
    padding: 10px;
    border-top: 1px solid var(--border);
    vertical-align: top;
  }
  .goodTxt{ color: #1b5e20; font-weight: 900; }
  .midTxt{  color: #e65100; font-weight: 900; }
  .badTxt{  color: #b91c1c; font-weight: 900; }

  @media (max-width: 520px){
    .page-title{ display: none; }
    .brand img{ height: 40px; }
  }
</style>
</head>

<body>

<header class="topbar">
  <div class="topbar-inner">
    <a class="brand" href="index.html" title="Back to Home">
      <img src="assets/pipc-short.png" alt="PIPC logo" />
      <div class="brand-title">PIPC</div>
    </a>
    <div class="page-title">ENT</div>
  </div>
</header>

<div class="wrap">
  <div class="crumb"><a href="index.html">‚Üê Home</a></div>

  <h1>ENT</h1>
  <p class="sub">Tap a tile for detail. Sections are separated for fast scanning. Use the subtle üö© pill for red flags.</p>

  <div class="grid">
    <div class="tile" onclick="openWindow('comparisons')">
      <h3>üìä Comparisons</h3>
      <p>Otitis externa vs media ‚Ä¢ sore throat causes ‚Ä¢ sinusitis vs rhinitis</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('ent')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('otitis_externa')">
      <h3>üëÇ Otitis Externa</h3>
      <p>Ear pain ‚Ä¢ itch ‚Ä¢ tragal tenderness ‚Ä¢ discharge</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('ear')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('otitis_media')">
      <h3>ü¶ª Otitis Media (AOM)</h3>
      <p>Otalgia ‚Ä¢ fever ‚Ä¢ bulging TM ‚Ä¢ unwell</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('ear')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('mastoiditis')">
      <h3>üö® Mastoiditis</h3>
      <p>Post-auricular swelling ‚Ä¢ protruding pinna ‚Ä¢ systemic illness</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('mastoid')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('sore_throat')">
      <h3>üòÆ‚Äçüí® Sore Throat / Tonsillitis</h3>
      <p>Odynophagia ‚Ä¢ fever ‚Ä¢ exudate ‚Ä¢ cervical nodes</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('throat')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('peritonsillar')">
      <h3>üö® Peritonsillar Abscess (Quinsy)</h3>
      <p>Hot potato voice ‚Ä¢ trismus ‚Ä¢ uvula deviation</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('quinsy')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('sinusitis')">
      <h3>ü§ß Acute Sinusitis</h3>
      <p>Facial pain ‚Ä¢ purulent discharge ‚Ä¢ worse on bending</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('sinus')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('rhinitis')">
      <h3>üåø Allergic Rhinitis</h3>
      <p>Sneezing ‚Ä¢ itch ‚Ä¢ watery rhinorrhoea ‚Ä¢ seasonal</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('sinus')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('vertigo')">
      <h3>üåÄ Vertigo (BPPV vs Vestibular Neuritis)</h3>
      <p>Spinning ‚Ä¢ triggers ‚Ä¢ neuro red flags matter</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('vertigo')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('epistaxis')">
      <h3>ü©∏ Epistaxis</h3>
      <p>Nosebleed ‚Ä¢ anticoagulants ‚Ä¢ posterior bleed risk</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('bleed')">üö©</div>
    </div>
  </div>
</div>

<script>
let zIndexCounter = 1000;

function createWindow(title, html) {
  const win = document.createElement("div");
  win.className = "window";
  win.style.zIndex = ++zIndexCounter;

  win.innerHTML = `
    <div class="window-header">
      ${title}
      <span class="close" onclick="this.closest('.window').remove()">‚úñ</span>
    </div>
    <div class="window-body">${html}</div>
  `;

  document.body.appendChild(win);
  makeDraggable(win);
}

function makeDraggable(win) {
  const header = win.querySelector(".window-header");
  let dragging = false, offsetX = 0, offsetY = 0;

  header.addEventListener("mousedown", (e) => {
    dragging = true;
    win.style.zIndex = ++zIndexCounter;
    offsetX = e.clientX - win.offsetLeft;
    offsetY = e.clientY - win.offsetTop;
    document.body.style.userSelect = "none";
  });

  document.addEventListener("mousemove", (e) => {
    if (!dragging) return;
    win.style.left = (e.clientX - offsetX) + "px";
    win.style.top  = (e.clientY - offsetY) + "px";
  });

  document.addEventListener("mouseup", () => {
    dragging = false;
    document.body.style.userSelect = "auto";
  });
}

/* Section helpers */
function section(title, items, variant="") {
  const cls = variant ? `section ${variant}` : "section";
  const list = (items || []).map(x => `<li>${x}</li>`).join("");
  return `
    <div class="${cls}">
      <h4>${title}</h4>
      <ul>${list}</ul>
    </div>
  `;
}
function linksSection(title, links) {
  const list = (links || []).map(l => `<li><a href="${l.href}" target="_blank">${l.label}</a></li>`).join("");
  return `
    <div class="section alt">
      <h4>${title}</h4>
      <ul>${list}</ul>
    </div>
  `;
}
function imageSection(title, src, alt, creditHtml){
  return `
    <div class="section alt">
      <h4>${title}</h4>
      <div class="img-wrap">
        <img src="${src}" alt="${alt}">
      </div>
      <div class="mini-note">${creditHtml}</div>
    </div>
  `;
}

/* Content */
function openWindow(key) {
  const content = {

    comparisons: `
      <div class="section">
        <h4>Otitis externa vs Otitis media (quick cues)</h4>
        <table class="compare">
          <tr><th>Feature</th><th>Otitis externa</th><th>Otitis media (AOM)</th></tr>
          <tr><td>Pain</td><td class="midTxt">Often severe, worse with tragal/pinna movement</td><td class="midTxt">Deep ear pain, often with systemic symptoms</td></tr>
          <tr><td>Discharge</td><td class="midTxt">Common</td><td class="goodTxt">Less common (unless perforation)</td></tr>
          <tr><td>TM view</td><td class="goodTxt">May be hard to see (canal swollen)</td><td class="badTxt">Bulging/erythematous TM</td></tr>
          <tr><td>Hearing</td><td class="midTxt">Reduced (blocked canal)</td><td class="midTxt">Reduced (middle ear effusion)</td></tr>
          <tr><td>Tx</td><td>Topical drops + analgesia (local/NICE)</td><td>Analgesia; antibiotics only if indicated (local/NICE)</td></tr>
        </table>
      </div>

      <div class="section alt">
        <h4>Sore throat: viral vs bacterial vs quinsy</h4>
        <table class="compare">
          <tr><th>Clue</th><th>Viral</th><th>Bacterial (likely)</th><th>Quinsy</th></tr>
          <tr><td>Systemic</td><td class="goodTxt">Mild</td><td class="midTxt">Fever, unwell</td><td class="badTxt">Very unwell</td></tr>
          <tr><td>Exam</td><td>Coryza/cough common</td><td>Exudate + tender nodes</td><td class="badTxt">Trismus, uvula deviation, unilateral swelling</td></tr>
          <tr><td>Voice</td><td>Normal</td><td>Normal</td><td class="badTxt">‚ÄúHot potato‚Äù voice</td></tr>
          <tr><td>Action</td><td>Supportive</td><td>Score + consider antibiotics</td><td class="badTxt">Urgent same-day ENT/ED</td></tr>
        </table>
      </div>

      <div class="section good">
        <h4>Sinusitis vs allergic rhinitis</h4>
        <table class="compare">
          <tr><th>Feature</th><th>Sinusitis</th><th>Allergic rhinitis</th></tr>
          <tr><td>Discharge</td><td class="midTxt">Often purulent</td><td class="goodTxt">Clear/watery</td></tr>
          <tr><td>Pain/pressure</td><td class="midTxt">Facial pain/pressure, worse bending</td><td class="goodTxt">Itch more prominent</td></tr>
          <tr><td>Sneezing/itch</td><td class="goodTxt">Less prominent</td><td class="badTxt">Prominent</td></tr>
          <tr><td>Fever</td><td class="midTxt">Sometimes</td><td class="goodTxt">No</td></tr>
        </table>
      </div>
    `,

    otitis_externa: `
      ${imageSection(
        "Example appearance (licensed)",
        "https://upload.wikimedia.org/wikipedia/commons/a/ab/Otite_externe.jpg",
        "Otitis externa with inflamed external ear canal",
        `Image: ‚ÄúOtite externe‚Äù ‚Äî CC BY-SA 3.0. <a href="https://commons.wikimedia.org/wiki/File:Otite_externe.jpg" target="_blank">Source</a> ‚Ä¢ <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank">Licence</a>`
      )}

      ${section("Definition", [
        "Inflammation/infection of the external auditory canal (often bacterial; can be fungal)."
      ])}

      ${section("Key features", [
        "Otalgia (often severe), itch",
        "Tragal/pinna tenderness",
        "Otorrhoea",
        "Canal swollen/debris; hearing reduced"
      ], "alt")}

      ${section("Quick assessment", [
        "Check for fever/systemic illness",
        "Look for cellulitis around ear",
        "Diabetes/immunosuppression (risk of malignant otitis externa)",
        "Can you see the tympanic membrane?"
      ], "good")}

      ${section("Management (Primary Care)", [
        "Analgesia",
        "Topical drops per local/NICE guidance",
        "Keep ear dry; avoid cotton buds",
        "Review if not improving"
      ])}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Otitis externa", href: "https://cks.nice.org.uk/topics/otitis-externa/" }
      ])}
    `,

    otitis_media: `
      ${imageSection(
        "Example appearance (licensed)",
        "https://upload.wikimedia.org/wikipedia/commons/f/f3/Acute_Otitis_Media_Stage_of_Resolution.jpg",
        "Bulging tympanic membrane in acute otitis media",
        `Image: ‚ÄúAcute Otitis Media Stage of Resolution‚Äù ‚Äî CC BY 4.0. <a href="https://commons.wikimedia.org/wiki/File:Acute_Otitis_Media_Stage_of_Resolution.jpg" target="_blank">Source</a> ‚Ä¢ <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">Licence</a>`
      )}

      ${section("Definition", [
        "Acute infection of the middle ear (often viral; can be bacterial)."
      ])}

      ${section("Key features", [
        "Otalgia, fever, irritability (children)",
        "Bulging/erythematous tympanic membrane",
        "Hearing reduction",
        "Possible otorrhoea if perforation"
      ], "alt")}

      ${section("Quick assessment", [
        "Systemic illness/sepsis features?",
        "Mastoid tenderness/swelling?",
        "Immunosuppression/frailty",
        "Duration and severity"
      ], "good")}

      ${section("Management (Primary Care)", [
        "Analgesia first-line",
        "Antibiotics only if indicated (local + NICE CKS criteria)",
        "Safety-net: worsening pain, fever, mastoid symptoms"
      ])}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Otitis media (acute)", href: "https://cks.nice.org.uk/topics/otitis-media-acute/" }
      ])}
    `,

    mastoiditis: `
      ${imageSection(
        "Example appearance (licensed)",
        "https://upload.wikimedia.org/wikipedia/commons/f/f9/Mastoiditis1.jpg",
        "Post-auricular erythema and swelling consistent with mastoiditis",
        `Image: ‚ÄúMastoiditis1‚Äù ‚Äî CC BY-SA 3.0 (licence options listed on file page). <a href="https://commons.wikimedia.org/wiki/File:Mastoiditis1.jpg" target="_blank">Source</a> ‚Ä¢ <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank">Licence</a>`
      )}

      ${section("Definition", [
        "Complication of otitis media with infection/inflammation of the mastoid air cells.",
        "Treat as time-critical: often needs same-day hospital assessment."
      ])}

      ${section("Key features", [
        "Post-auricular erythema/swelling/tenderness",
        "Protruding pinna",
        "Fever, systemic illness",
        "Otalgia +/- otorrhoea"
      ], "alt")}

      ${section("Action", [
        "Urgent same-day ED/ENT assessment",
        "Consider sepsis pathway if indicated",
        "Do not delay if red flags present"
      ], "danger")}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Otitis media (acute)", href: "https://cks.nice.org.uk/topics/otitis-media-acute/" }
      ])}
    `,

    sore_throat: `
      ${section("Definition", [
        "Acute sore throat may be viral or bacterial tonsillitis/pharyngitis."
      ])}

      ${section("Key features", [
        "Odynophagia",
        "Fever, malaise",
        "Tonsillar exudate (sometimes)",
        "Tender anterior cervical nodes",
        "Cough/coryza suggests viral"
      ], "alt")}

      ${section("Quick assessment", [
        "Hydration + ability to swallow",
        "Airway risk? drooling/stridor?",
        "Consider scoring (e.g. FeverPAIN/Centor) per local approach",
        "Consider EBV if significant fatigue/generalised lymphadenopathy"
      ], "good")}

      ${section("Management (Primary Care)", [
        "Analgesia, fluids, safety-net",
        "Consider antibiotics if criteria met (local + NICE CKS)",
        "Advise return if worsening, unilateral swelling, trismus, breathing difficulty"
      ])}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Sore throat (acute)", href: "https://cks.nice.org.uk/topics/sore-throat-acute/" }
      ])}
    `,

    peritonsillar: `
      ${imageSection(
        "Example appearance (licensed)",
        "https://upload.wikimedia.org/wikipedia/commons/3/39/PeritonsilarAbsess.jpg",
        "Right-sided peritonsillar abscess with uvula deviation",
        `Image: ‚ÄúPeritonsilarAbsess‚Äù ‚Äî CC BY-SA 3.0. <a href="https://commons.wikimedia.org/wiki/File:PeritonsilarAbsess.jpg" target="_blank">Source</a> ‚Ä¢ <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank">Licence</a>`
      )}

      ${section("Definition", [
        "Peritonsillar abscess (quinsy) ‚Äì complication of tonsillitis; urgent condition."
      ])}

      ${section("Key features (classic)", [
        "Severe unilateral sore throat",
        "Trismus",
        "‚ÄúHot potato‚Äù voice",
        "Uvula deviation",
        "Drooling; unable to swallow"
      ], "alt")}

      ${section("Action", [
        "Same-day urgent ENT/ED assessment",
        "Airway risk: escalate immediately if breathing difficulty"
      ], "danger")}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Sore throat (acute)", href: "https://cks.nice.org.uk/topics/sore-throat-acute/" }
      ])}
    `,

    sinusitis: `
      ${section("Definition", [
        "Inflammation/infection of the paranasal sinuses (often viral; sometimes bacterial)."
      ])}

      ${section("Key features", [
        "Facial pain/pressure (worse bending)",
        "Nasal obstruction",
        "Purulent discharge",
        "Hyposmia",
        "Tooth pain (sometimes)"
      ], "alt")}

      ${section("Quick assessment", [
        "Duration: <10 days often viral",
        "High fever, severe pain, worsening after initial improvement ‚Üí consider bacterial",
        "Eye symptoms/neuro symptoms are red flags"
      ], "good")}

      ${section("Management (Primary Care)", [
        "Analgesia, saline irrigation",
        "Intranasal steroid if appropriate",
        "Antibiotics only if indicated (local + NICE CKS)",
        "Safety-net for orbital/neuro features"
      ])}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Sinusitis", href: "https://cks.nice.org.uk/topics/sinusitis/" }
      ])}
    `,

    rhinitis: `
      ${section("Definition", [
        "Inflammation of nasal mucosa due to allergy (seasonal/perennial)."
      ])}

      ${section("Key features", [
        "Sneezing",
        "Nasal itch",
        "Watery rhinorrhoea",
        "Itchy/watery eyes",
        "Often seasonal triggers"
      ], "alt")}

      ${section("Management (Primary Care)", [
        "Trigger avoidance where possible",
        "Intranasal steroid (most effective) if appropriate",
        "Non-sedating antihistamine",
        "Saline sprays/irrigation"
      ], "good")}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Allergic rhinitis", href: "https://cks.nice.org.uk/topics/allergic-rhinitis/" }
      ])}
    `,

    vertigo: `
      ${section("Definition", [
        "Vertigo is a symptom. Differentiate peripheral causes from central causes (stroke)."
      ])}

      ${section("BPPV (classic)", [
        "Brief episodes (seconds‚Äìminutes)",
        "Triggered by head movement/position change",
        "No neuro deficits"
      ], "alt")}

      ${section("Vestibular neuritis/labyrinthitis", [
        "Acute prolonged vertigo (hours‚Äìdays)",
        "Nausea/vomiting, gait unsteadiness",
        "Hearing loss suggests labyrinthitis"
      ], "good")}

      ${section("Red flags (central)", [
        "New focal neuro deficit",
        "Severe headache",
        "New ataxia/inability to walk",
        "Diplopia, dysarthria, limb weakness",
        "Risk factors for stroke"
      ], "danger")}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Vertigo", href: "https://cks.nice.org.uk/topics/vertigo/" }
      ])}
    `,

    epistaxis: `
      ${section("Definition", [
        "Bleeding from the nose (usually anterior; posterior bleeds can be significant)."
      ])}

      ${section("Quick assessment", [
        "ABC approach if heavy bleed",
        "Anticoagulants/antiplatelets?",
        "Trauma?",
        "Haemodynamic compromise?",
        "Posterior bleed clues: bleeding into throat, hard to visualise"
      ], "good")}

      ${section("Management (Primary Care)", [
        "Sit forward, pinch soft part of nose 10‚Äì15 minutes",
        "Avoid swallowing blood",
        "Topical vasoconstrictor if available per local protocol",
        "Safety-net: recurrent bleeds, heavy bleed, syncope, anticoagulated"
      ], "alt")}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Epistaxis", href: "https://cks.nice.org.uk/topics/epistaxis/" }
      ])}
    `
  };

  createWindow(titleFor(key), content[key] || section("Not found", ["Content not found."]));
}

/* Red flags */
function openRedFlags(topic) {
  const flags = {
    ent: [
      "Stridor, drooling, airway compromise",
      "Sepsis features / rapidly worsening condition",
      "Severe unilateral throat pain + trismus (quinsy)",
      "Facial swelling/eye pain/vision changes (orbital complication)",
      "Severe headache, meningism, neuro deficit (intracranial spread)",
      "Heavy epistaxis or haemodynamic compromise"
    ],
    ear: [
      "Mastoid swelling/tenderness",
      "Facial nerve weakness",
      "Severe pain in diabetes/immunosuppressed (malignant otitis externa)",
      "Systemically unwell / sepsis"
    ],
    mastoid: [
      "Post-auricular swelling + protruding pinna",
      "Fever/systemic illness",
      "Facial nerve weakness",
      "Sepsis features"
    ],
    throat: [
      "Unable to swallow fluids / dehydration",
      "Drooling/stridor/airway concern",
      "Trismus, uvula deviation, hot potato voice (quinsy)",
      "Unilateral neck swelling / significant voice change"
    ],
    quinsy: [
      "Airway compromise",
      "Unable to swallow, drooling",
      "Significant trismus, uvula deviation",
      "Sepsis features"
    ],
    sinus: [
      "Periorbital swelling/redness",
      "Painful eye movements / visual change",
      "Severe frontal headache / meningism",
      "Neuro deficit or reduced consciousness"
    ],
    vertigo: [
      "Any focal neuro deficit",
      "New inability to walk/ataxia",
      "Severe headache",
      "Diplopia/dysarthria/limb weakness"
    ],
    bleed: [
      "Heavy bleeding not stopping with pressure",
      "Anticoagulated + ongoing bleed",
      "Syncope/haemodynamic compromise",
      "Suspected posterior bleed"
    ]
  };

  const list = flags[topic] || flags.ent;

  const html = `
    <div class="section danger">
      <h4>FAST RED FLAGS</h4>
      <ul>
        ${list.map(x => `<li><strong>${x}</strong></li>`).join("")}
      </ul>
      <div class="mini-note">If concerned: follow local escalation pathways.</div>
    </div>
  `;

  createWindow("üö© Red Flags", html);
}

/* Titles */
function titleFor(key){
  const map = {
    comparisons: "Comparisons",
    otitis_externa: "Otitis Externa",
    otitis_media: "Otitis Media (Acute)",
    mastoiditis: "Mastoiditis",
    sore_throat: "Sore Throat / Tonsillitis",
    peritonsillar: "Peritonsillar Abscess (Quinsy)",
    sinusitis: "Acute Sinusitis",
    rhinitis: "Allergic Rhinitis",
    vertigo: "Vertigo",
    epistaxis: "Epistaxis"
  };
  return map[key] || key;
}
</script>

</body>
</html>