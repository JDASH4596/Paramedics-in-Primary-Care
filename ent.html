<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ENT ‚Äì PIPC</title>

<style>
  :root{
    --bg: #f3f5f8;
    --card: #ffffff;
    --text: #111827;
    --muted: #6b7280;
    --blue: #1e88e5;
    --border: #e5e7eb;
    --shadow: 0 6px 18px rgba(0,0,0,0.12);

    --danger-bg: #fff1f2;
    --danger-border: #fecdd3;
    --danger-text: #b91c1c;

    --sec-bg: #f1f8ff;
    --sec-border: #dbeafe;

    --sec2-bg: #f7f7ff;
    --sec2-border: #e0e7ff;

    --sec3-bg: #f6fffb;
    --sec3-border: #bbf7d0;
  }

  body{
    font-family: Arial, sans-serif;
    margin: 0;
    background: var(--bg);
    color: var(--text);
  }

  /* HEADER */
  .topbar{
    background: var(--card);
    border-bottom: 1px solid var(--border);
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
  }
  .topbar-inner{
    max-width: 1100px;
    margin: 0 auto;
    padding: 14px 16px;
    display: flex;
    align-items: center;
    gap: 14px;
  }
  .brand{
    display: flex;
    align-items: center;
    gap: 10px;
    text-decoration: none;
    color: inherit;
  }
  .brand img{ height: 44px; width: auto; display: block; }
  .brand-title{ font-weight: 900; letter-spacing: 0.2px; }
  .page-title{
    margin-left: auto;
    font-size: 1.05rem;
    font-weight: 900;
    color: #0f172a;
  }

  /* CONTENT */
  .wrap{
    max-width: 1100px;
    margin: 18px auto;
    padding: 0 16px 40px 16px;
  }
  .crumb{ margin: 8px 0 14px 0; }
  .crumb a{
    text-decoration: none;
    color: var(--blue);
    font-weight: 900;
  }
  h1{ margin: 6px 0 6px 0; font-size: 2.0rem; }
  p.sub{ margin: 0 0 18px 0; color: var(--muted); line-height: 1.4; }

  /* GRID */
  .grid{
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 14px;
  }

  .tile{
    position: relative;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 14px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    cursor: pointer;
    transition: transform 0.06s ease, box-shadow 0.12s ease;
  }
  .tile:hover{
    transform: translateY(-1px);
    box-shadow: 0 10px 22px rgba(0,0,0,0.08);
  }
  .tile h3{ margin: 0 0 6px 0; font-size: 1.06rem; }
  .tile p{ margin: 0; color: var(--muted); font-size: 0.92rem; }

  /* Subtle red flags pill */
  .flag-pill{
    position: absolute;
    top: 10px;
    right: 10px;
    border: 1px solid var(--danger-border);
    background: var(--danger-bg);
    color: var(--danger-text);
    font-weight: 900;
    font-size: 0.78rem;
    padding: 5px 8px;
    border-radius: 999px;
    cursor: pointer;
    user-select: none;
  }

  /* ===== Overlay (tap outside to close) ===== */
  .overlay{
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.35);
    z-index: 999; /* below window */
    display: none;
  }

  /* WINDOWS */
  .window{
  position: fixed;
  top: 110px;
  left: 120px;
  width: min(820px, 92vw);
  background: var(--card);
  border-radius: 14px;
  box-shadow: var(--shadow);
  border: 1px solid var(--border);
  z-index: 1000;
  box-sizing: border-box;

  /* NEW: keep content inside window */
  display: flex;
  flex-direction: column;
  max-height: calc(100vh - 140px); /* viewport minus header/bottom padding */
  overflow: hidden;               /* IMPORTANT */
}

.window-body{
  padding: 14px;

  /* NEW: body becomes the scroll area */
  flex: 1 1 auto;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  min-height: 0; /* IMPORTANT for flex scroll containers */
}

  .window-header{
    padding: 10px 12px;
    background: var(--blue);
    color: white;
    cursor: move;
    border-radius: 14px 14px 0 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    user-select: none;
    font-weight: 900;
  }

  .window-body{
    padding: 14px;
    max-height: 70vh;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }

  .close{
    cursor: pointer;
    font-weight: 900;
    padding: 2px 8px;
    border-radius: 8px;
    background: rgba(255,255,255,0.15);
  }

  /* SECTION CARDS */
  .section{
    border: 1px solid var(--sec-border);
    background: var(--sec-bg);
    border-radius: 12px;
    padding: 12px;
    margin: 10px 0;
  }
  .section.alt{
    border-color: var(--sec2-border);
    background: var(--sec2-bg);
  }
  .section.good{
    border-color: var(--sec3-border);
    background: var(--sec3-bg);
  }
  .section.danger{
    border-color: var(--danger-border);
    background: var(--danger-bg);
  }

  .section h4{
    margin: 0 0 8px 0;
    font-size: 0.95rem;
    letter-spacing: 0.2px;
    text-transform: uppercase;
  }

  .section ul{
    margin: 0;
    padding-left: 18px;
  }
  .section li{ margin: 6px 0; }

  .mini-note{
    margin-top: 8px;
    color: var(--muted);
    font-size: 0.9rem;
    line-height: 1.35;
  }

  .links a{
    color: var(--blue);
    font-weight: 900;
    text-decoration: none;
  }

  /* Comparison tables */
  table.compare{
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
    font-size: 0.92rem;
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
    background: white;
  }
  .compare th{
    background: #e3f2fd;
    padding: 10px;
    text-align: left;
    font-weight: 900;
  }
  .compare td{
    padding: 10px;
    border-top: 1px solid var(--border);
    vertical-align: top;
  }
  .goodTxt{ color: #1b5e20; font-weight: 900; }
  .midTxt{  color: #e65100; font-weight: 900; }
  .badTxt{  color: #b91c1c; font-weight: 900; }

  /* ===== Mobile window behaviour: fit screen + no sideways overflow ===== */
  @media (max-width: 820px){
  .window{
    left: 12px;
    right: 12px;
    top: 88px;
    bottom: 14px;
    width: auto;
    max-width: none;

    /* NEW: exact fit on phone screen */
    max-height: none;
    height: calc(100vh - 88px - 14px);
  }

  .window-header{ cursor: default; }

  .window-body{
    /* NEW: just fill remaining space + scroll */
    flex: 1 1 auto;
    min-height: 0;
    overflow-y: auto;
  }

  .window, .window *{
    max-width: 100%;
    box-sizing: border-box;
    overflow-wrap: anywhere;
    word-break: break-word;
  }
}

  @media (max-width: 520px){
    .page-title{ display: none; }
    .brand img{ height: 40px; }
  }
</style>
</head>

<body>

<!-- Overlay (tap anywhere outside the window to close) -->
<div id="overlay" class="overlay" aria-hidden="true"></div>

<header class="topbar">
  <div class="topbar-inner">
    <a class="brand" href="index.html" title="Back to Home">
      <img src="assets/pipc-short.png" alt="PIPC logo" />
      <div class="brand-title">PIPC</div>
    </a>
    <div class="page-title">ENT</div>
  </div>
</header>

<div class="wrap">
  <div class="crumb"><a href="index.html">‚Üê Home</a></div>

  <h1>ENT</h1>
  <p class="sub">Tap a tile for detail. Sections are separated for fast scanning. Use the small üö© pill for red flags.</p>

  <div class="grid">
    <div class="tile" onclick="openWindow('comparisons')">
      <h3>üìä Comparisons</h3>
      <p>Fast side-by-side tables (scan in seconds).</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('ent')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('sorethroat')">
      <h3>üó£Ô∏è Sore Throat / Tonsillitis</h3>
      <p>Viral vs bacterial ‚Ä¢ peritonsillar abscess cues</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('sorethroat')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('otitismedia')">
      <h3>üëÇ Otitis Media</h3>
      <p>Ear pain ‚Ä¢ fever ‚Ä¢ bulging TM</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('otitismedia')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('otitisexterna')">
      <h3>üíß Otitis Externa</h3>
      <p>Tragal tenderness ‚Ä¢ swollen canal ‚Ä¢ discharge</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('otitisexterna')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('sinusitis')">
      <h3>ü§ß Sinusitis</h3>
      <p>Facial pain ‚Ä¢ nasal discharge ‚Ä¢ fever</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('sinusitis')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('epistaxis')">
      <h3>üëÉ Epistaxis</h3>
      <p>First aid ‚Ä¢ packing cues ‚Ä¢ posterior bleed red flags</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('epistaxis')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('vertigo')">
      <h3>üåÄ Vertigo (BPPV)</h3>
      <p>Triggered by position ‚Ä¢ Epley overview ‚Ä¢ central red flags</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('vertigo')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('hearingloss')">
      <h3>üîá Sudden Hearing Loss</h3>
      <p>Urgent ENT referral ‚Ä¢ exclude stroke/central causes</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('hearingloss')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('foreignbody')">
      <h3>üß∏ Nasal Foreign Body</h3>
      <p>Unilateral discharge/odour ‚Ä¢ removal tips ‚Ä¢ button battery warning</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('foreignbody')">üö©</div>
    </div>
  </div>
</div>

<script>
let zIndexCounter = 1000;

const overlay = document.getElementById("overlay");

function showOverlay(){
  overlay.style.display = "block";
  overlay.setAttribute("aria-hidden", "false");
  document.body.style.overflow = "hidden";
}
function hideOverlay(){
  overlay.style.display = "none";
  overlay.setAttribute("aria-hidden", "true");
  document.body.style.overflow = "";
}

/* Close any open window (ONE open at a time for clean mobile UX) */
function closeAllWindows(){
  document.querySelectorAll(".window").forEach(w => w.remove());
  hideOverlay();
}

/* Tap outside to close */
overlay.addEventListener("click", closeAllWindows);

/* ESC to close (desktop) */
document.addEventListener("keydown", (e) => {
  if(e.key === "Escape") closeAllWindows();
});

/* Window helpers */
function createWindow(title, html) {
  closeAllWindows();
  showOverlay();

  const win = document.createElement("div");
  win.className = "window";
  win.style.zIndex = ++zIndexCounter;

  win.innerHTML = `
    <div class="window-header">
      ${title}
      <span class="close" onclick="closeWindow(this)">‚úñ</span>
    </div>
    <div class="window-body">${html}</div>
  `;

  document.body.appendChild(win);
  makeDraggable(win);

  win.addEventListener("mousedown", () => {
    win.style.zIndex = ++zIndexCounter;
  });
}

function closeWindow(closeEl){
  const win = closeEl.closest(".window");
  if(win) win.remove();
  hideOverlay();
}

function makeDraggable(win) {
  const header = win.querySelector(".window-header");
  let dragging = false, offsetX = 0, offsetY = 0;

  function canDrag(){
    return window.matchMedia("(min-width: 821px)").matches;
  }

  header.addEventListener("mousedown", (e) => {
    if(!canDrag()) return;
    dragging = true;
    win.style.zIndex = ++zIndexCounter;
    offsetX = e.clientX - win.offsetLeft;
    offsetY = e.clientY - win.offsetTop;
    document.body.style.userSelect = "none";
  });

  document.addEventListener("mousemove", (e) => {
    if (!dragging) return;
    win.style.left = (e.clientX - offsetX) + "px";
    win.style.top  = (e.clientY - offsetY) + "px";
  });

  document.addEventListener("mouseup", () => {
    dragging = false;
    document.body.style.userSelect = "auto";
  });
}

/* Section builder */
function section(title, items, variant="") {
  const cls = variant ? `section ${variant}` : "section";
  const list = (items || []).map(x => `<li>${x}</li>`).join("");
  return `
    <div class="${cls}">
      <h4>${title}</h4>
      <ul>${list}</ul>
    </div>
  `;
}
function linksSection(title, links) {
  const list = (links || []).map(l => `<li class="links"><a href="${l.href}" target="_blank">${l.label}</a></li>`).join("");
  return `
    <div class="section alt">
      <h4>${title}</h4>
      <ul>${list}</ul>
    </div>
  `;
}

/* Content windows */
function openWindow(key) {
  const content = {

    comparisons: `
      <div class="section">
        <h4>Sore throat vs Peritonsillar abscess vs Epiglottitis (cues)</h4>
        <table class="compare">
          <tr><th>Feature</th><th>Sore throat</th><th>Peritonsillar abscess</th><th>Epiglottitis</th></tr>
          <tr><td>Voice</td><td>Normal</td><td class="midTxt">‚ÄúHot potato‚Äù voice</td><td class="badTxt">Muffled + distress</td></tr>
          <tr><td>Mouth opening</td><td>Normal</td><td class="badTxt">Trismus</td><td class="midTxt">Often painful</td></tr>
          <tr><td>Drooling/stridor</td><td class="goodTxt">No</td><td class="midTxt">Possible</td><td class="badTxt">Yes / airway risk</td></tr>
          <tr><td>Urgency</td><td class="goodTxt">Routine</td><td class="midTxt">Same day</td><td class="badTxt">Emergency</td></tr>
        </table>
      </div>

      <div class="section alt">
        <h4>Otitis media vs externa (quick cues)</h4>
        <table class="compare">
          <tr><th>Clue</th><th>Otitis media</th><th>Otitis externa</th></tr>
          <tr><td>Pain</td><td>Deep ear pain</td><td class="midTxt">Tragal/pinna tenderness</td></tr>
          <tr><td>Discharge</td><td>¬± if perforated</td><td class="midTxt">Common</td></tr>
          <tr><td>Canal</td><td class="goodTxt">Usually not swollen</td><td class="badTxt">Swollen/tender canal</td></tr>
        </table>
        <div class="mini-note links">
          <strong>NICE CKS search:</strong>
          <a href="https://cks.nice.org.uk/" target="_blank">https://cks.nice.org.uk/</a>
        </div>
      </div>
    `,

    sorethroat: `
      ${section("Definition", [
        "Inflammation of pharynx/tonsils. Most are viral; consider bacterial features (Centor/FeverPAIN)."
      ])}

      ${section("Quick assessment", [
        "Duration, fever, unilateral vs bilateral pain",
        "Swallowing, voice change, trismus",
        "Examine tonsils/uvula, cervical nodes, hydration",
        "Consider scarlet fever features (rash, strawberry tongue)"
      ], "good")}

      ${section("Management (Primary Care)", [
        "Analgesia, fluids, rest",
        "Consider Centor/FeverPAIN approach per local guidance",
        "Safety net if worsening or not improving"
      ])}

      ${section("Red flags / complications", [
        "Airway compromise, drooling, stridor",
        "Trismus / uvula deviation (consider peritonsillar abscess)",
        "Systemically very unwell / dehydration"
      ], "danger")}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Sore throat (acute)", href: "https://cks.nice.org.uk/topics/sore-throat-acute/" }
      ])}
    `,

    otitismedia: `
      ${section("Definition", [
        "Acute middle ear infection, often after URTI."
      ])}

      ${section("Quick assessment", [
        "Pain, fever, discharge, hearing change",
        "Otoscopy: bulging/erythematous TM, perforation",
        "Look for mastoid tenderness/swelling"
      ], "good")}

      ${section("Management (Primary Care)", [
        "Analgesia first-line",
        "Consider delayed antibiotics where appropriate (local guidance)",
        "Advice: return if worsening, persistent fever, or complications"
      ])}

      ${section("Red flags", [
        "Mastoiditis signs (post-auricular swelling, protruding ear)",
        "Facial nerve weakness",
        "Severe systemic illness / meningism"
      ], "danger")}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Acute otitis media", href: "https://cks.nice.org.uk/topics/otitis-media-acute/" }
      ])}
    `,

    otitisexterna: `
      ${section("Definition", [
        "Inflammation/infection of external ear canal."
      ])}

      ${section("Quick assessment", [
        "Canal pain/itch, discharge, hearing reduction",
        "Tragal tenderness, swollen canal",
        "Risk factors: swimming, trauma, diabetes/immunocompromise"
      ], "good")}

      ${section("Management (Primary Care)", [
        "Topical drops per local guidance",
        "Keep ear dry; avoid cotton buds",
        "Consider wick if canal very swollen (service dependent)"
      ])}

      ${section("Red flags", [
        "Diabetes/immunocompromised with severe pain (consider malignant otitis externa)",
        "Spreading cellulitis, cranial nerve symptoms",
        "Systemically unwell"
      ], "danger")}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Otitis externa", href: "https://cks.nice.org.uk/topics/otitis-externa/" }
      ])}
    `,

    sinusitis: `
      ${section("Definition", [
        "Inflammation of paranasal sinuses; often viral. Bacterial more likely if prolonged/severe."
      ])}

      ${section("Quick assessment", [
        "Duration (e.g. >10 days), fever, unilateral facial pain",
        "Purulent discharge, anosmia, dental pain",
        "Check for orbital symptoms"
      ], "good")}

      ${section("Management (Primary Care)", [
        "Analgesia, saline irrigation",
        "Consider intranasal steroid (esp. rhinitis/allergy features)",
        "Antibiotics only if criteria met (local guidance)"
      ])}

      ${section("Red flags", [
        "Periorbital swelling/erythema, reduced vision, painful eye movements",
        "Severe frontal headache, neurological signs",
        "Signs of sepsis"
      ], "danger")}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Sinusitis", href: "https://cks.nice.org.uk/topics/sinusitis/" }
      ])}
    `,

    epistaxis: `
      ${section("Definition", [
        "Nasal bleeding, commonly anterior (Little‚Äôs area)."
      ])}

      ${section("First aid (Primary Care)", [
        "Sit forward, pinch soft part of nose 10‚Äì15 minutes",
        "Clear visible clots if possible before pinching",
        "Ice to bridge can help",
        "Avoid nose picking/blowing afterwards"
      ], "good")}

      ${section("Quick assessment", [
        "ABCDE if heavy bleed; quantify blood loss",
        "Anticoagulants/antiplatelets, trauma, HTN history",
        "Posterior bleed cues: blood into throat, hard to control"
      ])}

      ${section("Red flags", [
        "Cannot control bleeding, haemodynamic compromise",
        "Suspected posterior bleed",
        "Bleeding disorder / anticoagulated with significant bleed"
      ], "danger")}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Epistaxis", href: "https://cks.nice.org.uk/topics/epistaxis/" }
      ])}
    `,

    vertigo: `
      ${section("Definition", [
        "BPPV: brief episodic vertigo triggered by head movement (otoliths in semicircular canals)."
      ])}

      ${section("Quick assessment", [
        "Seconds-long vertigo with position change",
        "No focal neurology (if present, not BPPV)",
        "Consider Dix‚ÄìHallpike (if trained) to reproduce nystagmus"
      ], "good")}

      ${section("Management", [
        "Repositioning manoeuvres (e.g., Epley) if appropriate",
        "Advise slow movements, falls risk",
        "Review if persistent or atypical"
      ])}

      ${section("Red flags (central causes)", [
        "New focal neuro deficit, severe headache, ataxia",
        "Continuous vertigo with central features",
        "New unilateral hearing loss"
      ], "danger")}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Vertigo", href: "https://cks.nice.org.uk/topics/vertigo/" }
      ])}
    `,

    hearingloss: `
      ${section("Definition", [
        "Sudden sensorineural hearing loss (SSNHL) is an ENT emergency. Treat as urgent."
      ])}

      ${section("Quick assessment", [
        "Onset <72 hours? unilateral? associated tinnitus/vertigo?",
        "Otoscopic exam (exclude wax/OM)",
        "Neuro symptoms? consider central causes"
      ], "good")}

      ${section("Action", [
        "Urgent same-day ENT assessment/referral pathway",
        "Consider steroids per local ENT guidance (do not delay referral)"
      ])}

      ${section("Red flags", [
        "Focal neuro deficits / severe headache",
        "New facial weakness",
        "Signs of stroke/TIA"
      ], "danger")}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Hearing loss (sudden onset)", href: "https://cks.nice.org.uk/topics/hearing-loss-sudden-onset/" }
      ])}
    `,

    foreignbody: `
      ${section("Definition", [
        "Foreign body in the nose (common in children). Often unilateral discharge/odour."
      ])}

      ${section("Quick assessment", [
        "Unilateral discharge ¬± foul smell",
        "Ask about what object (button battery is emergency)",
        "Check airway/breathing if any concern"
      ], "good")}

      ${section("Management", [
        "If visible and safe: consider gentle removal by trained clinician",
        "Do NOT probe blindly",
        "If not easily removed ‚Üí refer to ENT/ED per local pathway"
      ])}

      ${section("Red flags", [
        "Button battery suspected/confirmed (urgent)",
        "Breathing difficulty/aspiration concern",
        "Significant bleeding"
      ], "danger")}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Foreign body in nose", href: "https://cks.nice.org.uk/topics/foreign-body-in-nose/" }
      ])}
    `
  };

  createWindow(titleFor(key), content[key] || "<div class='section'><h4>Not found</h4><p>Content not found.</p></div>");
}

/* Red flags */
function openRedFlags(topic) {
  const flags = {
    ent: [
      "Airway compromise (stridor, drooling, tripod position)",
      "Severe systemic illness / sepsis features",
      "Severe unilateral facial swelling or orbital symptoms",
      "Sudden sensorineural hearing loss",
      "Neuro deficits (stroke/TIA concern)",
      "Uncontrolled bleeding (epistaxis) / haemodynamic compromise"
    ],
    sorethroat: [
      "Stridor/drooling/airway concern",
      "Trismus/uvula deviation (peritonsillar abscess)",
      "Neck swelling, severe pain out of proportion",
      "Sepsis features / dehydration"
    ],
    otitismedia: [
      "Mastoid swelling/tenderness, protruding ear",
      "Facial nerve weakness",
      "Meningism / severe systemic illness"
    ],
    otitisexterna: [
      "Diabetes/immunocompromised with severe pain (malignant otitis externa)",
      "Spreading cellulitis",
      "Cranial nerve symptoms"
    ],
    sinusitis: [
      "Periorbital swelling/redness, reduced vision, painful eye movements",
      "Severe frontal headache / neurological signs",
      "Sepsis features"
    ],
    epistaxis: [
      "Cannot control bleeding",
      "Suspected posterior bleed",
      "Anticoagulated with significant bleed",
      "Haemodynamic compromise"
    ],
    vertigo: [
      "New focal neuro deficit / ataxia",
      "Severe headache",
      "Continuous vertigo with central features",
      "New unilateral hearing loss"
    ],
    hearingloss: [
      "Sudden unilateral hearing loss (<72 hours)",
      "Neuro symptoms (stroke/TIA)",
      "New facial weakness"
    ],
    foreignbody: [
      "Button battery suspected",
      "Breathing difficulty/aspiration concern",
      "Significant bleeding"
    ]
  };

  const list = flags[topic] || flags.ent;

  const html = `
    <div class="section danger">
      <h4>FAST RED FLAGS</h4>
      <ul>
        ${list.map(x => `<li><strong>${x}</strong></li>`).join("")}
      </ul>
      <div class="mini-note">If concerned: follow local escalation pathways.</div>
    </div>
  `;

  createWindow("üö© Red Flags", html);
}

/* Titles */
function titleFor(key){
  const map = {
    comparisons: "Comparisons",
    sorethroat: "Sore Throat / Tonsillitis",
    otitismedia: "Otitis Media",
    otitisexterna: "Otitis Externa",
    sinusitis: "Sinusitis",
    epistaxis: "Epistaxis",
    vertigo: "Vertigo (BPPV)",
    hearingloss: "Sudden Hearing Loss",
    foreignbody: "Nasal Foreign Body"
  };
  return map[key] || key;
}
</script>

</body>
</html>