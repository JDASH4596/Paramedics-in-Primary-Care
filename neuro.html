<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Neurology ‚Äì PIPC</title>

<style>
  :root{
    --bg: #f3f5f8;
    --card: #ffffff;
    --text: #111827;
    --muted: #6b7280;
    --blue: #1e88e5;
    --border: #e5e7eb;
    --shadow: 0 6px 18px rgba(0,0,0,0.12);

    --danger-bg: #fff1f2;
    --danger-border: #fecdd3;
    --danger-text: #b91c1c;

    --sec-bg: #f1f8ff;
    --sec-border: #dbeafe;

    --sec2-bg: #f7f7ff;
    --sec2-border: #e0e7ff;

    --sec3-bg: #f6fffb;
    --sec3-border: #bbf7d0;
  }

  body{
    font-family: Arial, sans-serif;
    margin: 0;
    background: var(--bg);
    color: var(--text);
  }

  /* HEADER */
  .topbar{
    background: var(--card);
    border-bottom: 1px solid var(--border);
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
  }
  .topbar-inner{
    max-width: 1100px;
    margin: 0 auto;
    padding: 14px 16px;
    display: flex;
    align-items: center;
    gap: 14px;
  }
  .brand{
    display: flex;
    align-items: center;
    gap: 10px;
    text-decoration: none;
    color: inherit;
  }
  .brand img{ height: 44px; width: auto; display: block; }
  .brand-title{ font-weight: 900; letter-spacing: 0.2px; }
  .page-title{
    margin-left: auto;
    font-size: 1.05rem;
    font-weight: 900;
    color: #0f172a;
  }

  /* CONTENT */
  .wrap{
    max-width: 1100px;
    margin: 18px auto;
    padding: 0 16px 110px 16px; /* space for footer + banner */
  }
  .crumb{ margin: 8px 0 14px 0; }
  .crumb a{
    text-decoration: none;
    color: var(--blue);
    font-weight: 900;
  }
  h1{ margin: 6px 0 6px 0; font-size: 2.0rem; }
  p.sub{ margin: 0 0 18px 0; color: var(--muted); line-height: 1.4; }

  /* GRID */
  .grid{
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 14px;
  }
  .tile{
    position: relative;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 14px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    cursor: pointer;
    transition: transform 0.06s ease, box-shadow 0.12s ease;
  }
  .tile:hover{
    transform: translateY(-1px);
    box-shadow: 0 10px 22px rgba(0,0,0,0.08);
  }
  .tile h3{ margin: 0 0 6px 0; font-size: 1.06rem; }
  .tile p{ margin: 0; color: var(--muted); font-size: 0.92rem; }

  /* Subtle red flags pill */
  .flag-pill{
    position: absolute;
    top: 10px;
    right: 10px;
    border: 1px solid var(--danger-border);
    background: var(--danger-bg);
    color: var(--danger-text);
    font-weight: 900;
    font-size: 0.78rem;
    padding: 5px 8px;
    border-radius: 999px;
    cursor: pointer;
    user-select: none;
  }

  /* ===== Overlay (tap outside to close) ===== */
  .overlay{
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.35);
    z-index: 999; /* below window */
    display: none;
  }

  /* WINDOWS */
  .window{
    position: fixed;
    top: 110px;
    left: 120px;
    width: min(820px, 92vw);
    background: var(--card);
    border-radius: 14px;
    box-shadow: var(--shadow);
    border: 1px solid var(--border);
    z-index: 1000; /* above overlay */
    box-sizing: border-box;
  }

  .window-header{
    padding: 10px 12px;
    background: var(--blue);
    color: white;
    cursor: move;
    border-radius: 14px 14px 0 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    user-select: none;
    font-weight: 900;
  }

  .window-body{
    padding: 14px;
    max-height: 70vh;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }

  .close{
    cursor: pointer;
    font-weight: 900;
    padding: 2px 8px;
    border-radius: 8px;
    background: rgba(255,255,255,0.15);
  }

  /* SECTION CARDS */
  .section{
    border: 1px solid var(--sec-border);
    background: var(--sec-bg);
    border-radius: 12px;
    padding: 12px;
    margin: 10px 0;
  }
  .section.alt{
    border-color: var(--sec2-border);
    background: var(--sec2-bg);
  }
  .section.good{
    border-color: var(--sec3-border);
    background: var(--sec3-bg);
  }
  .section.danger{
    border-color: var(--danger-border);
    background: var(--danger-bg);
  }

  .section h4{
    margin: 0 0 8px 0;
    font-size: 0.95rem;
    letter-spacing: 0.2px;
    text-transform: uppercase;
  }

  .section ul{
    margin: 0;
    padding-left: 18px;
  }
  .section li{ margin: 6px 0; }

  .mini-note{
    margin-top: 8px;
    color: var(--muted);
    font-size: 0.9rem;
    line-height: 1.35;
  }

  .links a{
    color: var(--blue);
    font-weight: 900;
    text-decoration: none;
  }

  /* Comparison tables */
  table.compare{
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
    font-size: 0.92rem;
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
    background: white;
  }
  .compare th{
    background: #e3f2fd;
    padding: 10px;
    text-align: left;
    font-weight: 900;
  }
  .compare td{
    padding: 10px;
    border-top: 1px solid var(--border);
    vertical-align: top;
  }
  .goodTxt{ color: #1b5e20; font-weight: 900; }
  .midTxt{  color: #e65100; font-weight: 900; }
  .badTxt{  color: #b91c1c; font-weight: 900; }

  /* ===== Mobile window behaviour: fit screen + no sideways overflow ===== */
  @media (max-width: 820px){
    .window{
      left: 12px;
      right: 12px;
      top: 88px;     /* below topbar */
      bottom: 14px;  /* keep off the very bottom */
      width: auto;
      max-width: none;
    }
    .window-header{
      cursor: default; /* dragging is awkward on mobile */
    }
    .window-body{
      max-height: calc(100vh - 88px - 14px - 44px);
      overflow-y: auto;
    }
    .window, .window *{
      max-width: 100%;
      box-sizing: border-box;
      overflow-wrap: anywhere;
      word-break: break-word;
    }
  }

  @media (max-width: 520px){
    .page-title{ display: none; }
    .brand img{ height: 40px; }
  }

  /* ===== Site-wide footer + disclaimer banner + first-visit modal ===== */

  .site-footer{
    position: fixed;
    left: 0; right: 0; bottom: 0;
    z-index: 50;
    background: var(--card);
    border-top: 1px solid var(--border);
    box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
  }
  .site-footer-inner{
    max-width: 1100px;
    margin: 0 auto;
    padding: 10px 16px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    color: var(--muted);
    font-size: 0.9rem;
  }
  .site-footer a{
    color: var(--blue);
    font-weight: 900;
    text-decoration: none;
  }
  .site-footer a:hover{ text-decoration: underline; }

  .disclaimer-banner{
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    bottom: 54px; /* above footer */
    width: min(1100px, calc(100% - 24px));
    z-index: 60;
    background: #e3f2fd;
    border: 1px solid #bbdefb;
    border-radius: 12px;
    padding: 10px 12px;
    display: flex;
    gap: 10px;
    align-items: flex-start;
    justify-content: space-between;
    box-shadow: 0 10px 22px rgba(0,0,0,0.10);
  }
  .disclaimer-banner strong{ color: #0f172a; }
  .banner-actions{
    display: flex;
    gap: 8px;
    align-items: center;
    white-space: nowrap;
  }
  .btn{
    border: 1px solid var(--border);
    background: white;
    color: #0f172a;
    font-weight: 900;
    padding: 8px 10px;
    border-radius: 10px;
    cursor: pointer;
    font-size: 0.9rem;
    text-decoration: none;
  }
  .btn:hover{ filter: brightness(0.98); }

  .modal-overlay{
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.40);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 2000; /* above overlay/window */
    padding: 16px;
  }
  .modal{
    width: min(720px, 100%);
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 14px;
    box-shadow: var(--shadow);
    overflow: hidden;
  }
  .modal-head{
    padding: 12px 14px;
    background: var(--blue);
    color: white;
    font-weight: 900;
  }
  .modal-body{
    padding: 14px;
    color: var(--text);
  }
  .modal-body p{
    margin: 0 0 10px 0;
    color: var(--muted);
    line-height: 1.4;
  }
  .modal-body ul{ margin: 0; padding-left: 18px; }
  .modal-body li{ margin: 6px 0; }
  .modal-foot{
    padding: 12px 14px 14px;
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    border-top: 1px solid var(--border);
    background: #fafafa;
  }

  @media (max-width: 520px){
    .site-footer-inner{ flex-direction: column; align-items: flex-start; }
    .banner-actions{ flex-wrap: wrap; justify-content: flex-end; }
  }
</style>
</head>

<body>

<!-- Overlay (tap anywhere outside the window to close) -->
<div id="overlay" class="overlay" aria-hidden="true"></div>

<header class="topbar">
  <div class="topbar-inner">
    <a class="brand" href="index.html" title="Back to Home">
      <img src="assets/pipc-short.png" alt="PIPC logo" />
      <div class="brand-title">PIPC</div>
    </a>
    <div class="page-title">Neurology</div>
  </div>
</header>

<div class="wrap">
  <div class="crumb"><a href="index.html">‚Üê Home</a></div>

  <h1>Neurology</h1>
  <p class="sub">Tap a tile for detail. Sections are separated for fast scanning. Use the small üö© pill for red flags.</p>

  <div class="grid">
    <div class="tile" onclick="openWindow('comparisons')">
      <h3>üìä Comparisons</h3>
      <p>Fast side-by-side tables (scan in seconds).</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('neuro')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('headache')">
      <h3>ü§ï Headache</h3>
      <p>Primary vs secondary ‚Ä¢ SNOOP10 red flags</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('headache')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('seizure')">
      <h3>‚ö° Seizure / First fit</h3>
      <p>Immediate priorities ‚Ä¢ when to escalate</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('seizure')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('stroke')">
      <h3>üß† TIA / Stroke</h3>
      <p>FAST ‚Ä¢ time last known well ‚Ä¢ same-day pathway</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('stroke')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('dizzy')">
      <h3>üåÄ Dizziness / Vertigo</h3>
      <p>Central vs peripheral cues ‚Ä¢ red flags</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('dizzy')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('confusion')">
      <h3>üòµ‚Äçüí´ Acute Confusion</h3>
      <p>Delirium cues ‚Ä¢ safety-net ‚Ä¢ escalation</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('confusion')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('meningitis')">
      <h3>ü¶† Meningitis / Encephalitis</h3>
      <p>Fever + neuro signs ‚Ä¢ urgent escalation</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('meningitis')">üö©</div>
    </div>

    <div class="tile" onclick="openWindow('neuroredflags')">
      <h3>üö© Neuro Red Flags</h3>
      <p>Single place to scan urgent warning signs.</p>
      <div class="flag-pill" onclick="event.stopPropagation(); openRedFlags('neuro')">üö©</div>
    </div>
  </div>
</div>

<script>
let zIndexCounter = 1000;

const overlay = document.getElementById("overlay");

function showOverlay(){
  overlay.style.display = "block";
  overlay.setAttribute("aria-hidden", "false");
  document.body.style.overflow = "hidden"; // stop background scroll on mobile
}
function hideOverlay(){
  overlay.style.display = "none";
  overlay.setAttribute("aria-hidden", "true");
  document.body.style.overflow = ""; // restore
}

/* Close any open window (we keep ONE open at a time for clean mobile UX) */
function closeAllWindows(){
  document.querySelectorAll(".window").forEach(w => w.remove());
  hideOverlay();
}

/* Tap outside to close */
overlay.addEventListener("click", closeAllWindows);

/* ESC to close (desktop) */
document.addEventListener("keydown", (e) => {
  if(e.key === "Escape") closeAllWindows();
});

/* Window helpers */
function createWindow(title, html) {
  // Keep one open at a time (prevents stacking issues on mobile)
  closeAllWindows();

  showOverlay();

  const win = document.createElement("div");
  win.className = "window";
  win.style.zIndex = ++zIndexCounter;

  win.innerHTML = `
    <div class="window-header">
      ${title}
      <span class="close" onclick="closeWindow(this)">‚úñ</span>
    </div>
    <div class="window-body">${html}</div>
  `;

  document.body.appendChild(win);
  makeDraggable(win);

  // Bring to front if user taps inside (desktop nicety)
  win.addEventListener("mousedown", () => {
    win.style.zIndex = ++zIndexCounter;
  });
}

function closeWindow(closeEl){
  const win = closeEl.closest(".window");
  if(win) win.remove();
  hideOverlay();
}

function makeDraggable(win) {
  const header = win.querySelector(".window-header");
  let dragging = false, offsetX = 0, offsetY = 0;

  // Only enable drag on non-touch / wider screens
  function canDrag(){
    return window.matchMedia("(min-width: 821px)").matches;
  }

  header.addEventListener("mousedown", (e) => {
    if(!canDrag()) return;
    dragging = true;
    win.style.zIndex = ++zIndexCounter;
    offsetX = e.clientX - win.offsetLeft;
    offsetY = e.clientY - win.offsetTop;
    document.body.style.userSelect = "none";
  });

  document.addEventListener("mousemove", (e) => {
    if (!dragging) return;
    win.style.left = (e.clientX - offsetX) + "px";
    win.style.top  = (e.clientY - offsetY) + "px";
  });

  document.addEventListener("mouseup", () => {
    dragging = false;
    document.body.style.userSelect = "auto";
  });
}

/* Section builder */
function section(title, items, variant="") {
  const cls = variant ? `section ${variant}` : "section";
  const list = (items || []).map(x => `<li>${x}</li>`).join("");
  return `
    <div class="${cls}">
      <h4>${title}</h4>
      <ul>${list}</ul>
    </div>
  `;
}
function linksSection(title, links) {
  const list = (links || []).map(l => `<li class="links"><a href="${l.href}" target="_blank">${l.label}</a></li>`).join("");
  return `
    <div class="section alt">
      <h4>${title}</h4>
      <ul>${list}</ul>
    </div>
  `;
}

/* Content windows */
function openWindow(key) {
  const content = {

    comparisons: `
      <div class="section">
        <h4>Stroke/TIA vs Migraine vs Seizure (quick cues)</h4>
        <table class="compare">
          <tr><th>Feature</th><th>Stroke/TIA</th><th>Migraine</th><th>Seizure</th></tr>
          <tr><td>Onset</td><td class="badTxt">Sudden</td><td class="midTxt">Gradual</td><td class="badTxt">Sudden</td></tr>
          <tr><td>Focal neuro deficits</td><td class="badTxt">Common</td><td class="midTxt">Aura possible</td><td class="midTxt">Post-ictal deficits possible</td></tr>
          <tr><td>Headache</td><td class="midTxt">Sometimes</td><td class="badTxt">Prominent</td><td class="goodTxt">Variable</td></tr>
          <tr><td>Recovery</td><td class="midTxt">TIA resolves &lt;24h</td><td class="midTxt">Hours‚Äìdays</td><td class="midTxt">Post-ictal phase</td></tr>
        </table>
      </div>

      <div class="section alt">
        <h4>Peripheral vs Central Vertigo</h4>
        <table class="compare">
          <tr><th>Feature</th><th>Peripheral</th><th>Central</th></tr>
          <tr><td>Nystagmus</td><td class="midTxt">Unidirectional, fatigable</td><td class="badTxt">Vertical/bidirectional, non-fatigable</td></tr>
          <tr><td>Neuro signs</td><td class="goodTxt">Absent</td><td class="badTxt">Present (ataxia, diplopia, dysarthria)</td></tr>
          <tr><td>Gait</td><td class="midTxt">Imbalance</td><td class="badTxt">Severe ataxia/inability to walk</td></tr>
        </table>
        <div class="mini-note">If central features ‚Üí urgent same-day assessment.</div>
      </div>
    `,

    headache: `
      ${section("Quick assessment", [
        "Onset (sudden vs gradual), time course, severity",
        "Associated neuro symptoms: weakness, speech, vision change",
        "Fever/neck stiffness, rash, immunosuppression",
        "Head injury / anticoagulation",
        "New headache in older age or change in pattern",
        "Medication overuse"
      ], "good")}

      ${section("Red flags (SNOOP10 style prompts)", [
        "Systemic symptoms/signs (fever, weight loss) or secondary risk factors (HIV, cancer)",
        "Neurological deficit, confusion or reduced consciousness",
        "Onset: thunderclap / maximal at start",
        "Older age at onset / new progressive headache",
        "Pattern change or precipitated by exertion/sexual activity/cough"
      ], "danger")}

      ${section("Management (Primary Care)", [
        "Assess for secondary causes and escalate if red flags",
        "Analgesia advice + hydration + sleep hygiene",
        "Safety-net: worsening, new neuro deficits, persistent vomiting"
      ])}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Headache (assessment)", href: "https://cks.nice.org.uk/topics/headache-assessment/" }
      ])}
    `,

    seizure: `
      ${section("Immediate priorities", [
        "ABCDE + SpO‚ÇÇ",
        "Check glucose early",
        "Witness history: duration, focality, triggers, injury, recovery",
        "Consider provoked causes: infection, alcohol/withdrawal, meds, metabolic"
      ], "good")}

      ${section("Key concerns", [
        "Ongoing seizure activity / repeated seizures",
        "Persistent reduced consciousness",
        "New focal neurology / head injury",
        "Pregnancy, anticoagulation, significant comorbidity"
      ], "danger")}

      ${section("Action", [
        "If ongoing seizure, status features, or concerning presentation ‚Üí urgent emergency assessment (follow local pathway)"
      ], "alt")}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Seizures", href: "https://cks.nice.org.uk/topics/seizures/" }
      ])}
    `,

    stroke: `
      ${section("Key cues", [
        "FAST positive? facial droop / arm weakness / speech",
        "Time last known well (critical)",
        "Check glucose (stroke mimic)",
        "TIA if symptoms resolved: still urgent assessment per pathway"
      ], "danger")}

      ${section("Action", [
        "Suspected stroke/TIA ‚Üí urgent same-day escalation via local stroke/TIA pathway"
      ], "alt")}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Stroke and TIA", href: "https://cks.nice.org.uk/topics/stroke-tia/" }
      ])}
    `,

    dizzy: `
      ${section("Quick assessment", [
        "Timing/Triggers: seconds vs hours; positional? constant?",
        "Associated symptoms: hearing loss/tinnitus, neuro symptoms",
        "Vitals, hydration, glucose if appropriate",
        "Ask: diplopia, dysarthria, dysphagia, limb weakness/numbness"
      ], "good")}

      ${section("Central red flags", [
        "New focal neuro deficits",
        "Severe gait ataxia / cannot walk unaided",
        "New severe headache",
        "Persistent vomiting with neuro features"
      ], "danger")}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Vertigo", href: "https://cks.nice.org.uk/topics/vertigo/" }
      ])}
    `,

    confusion: `
      ${section("Quick assessment", [
        "Acute vs chronic change; baseline cognition",
        "Vitals, SpO‚ÇÇ, glucose (consider hypoglycaemia)",
        "Infection screen, medication review, dehydration",
        "Consider head injury, stroke/TIA, intoxication/withdrawal"
      ], "good")}

      ${section("Red flags", [
        "Reduced consciousness",
        "New focal neurology",
        "Sepsis features",
        "Meningism / non-blanching rash",
        "Concern re safeguarding/unsafe environment"
      ], "danger")}

      ${section("Action", [
        "If red flags or unsafe ‚Üí urgent same-day escalation"
      ], "alt")}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Delirium (overview)", href: "https://cks.nice.org.uk/topics/delirium/" }
      ])}
    `,

    meningitis: `
      ${section("Key features", [
        "Fever + headache",
        "Neck stiffness/photophobia",
        "Rash (non-blanching) ‚Äî may be absent",
        "Confusion/reduced consciousness",
        "Seizure"
      ], "danger")}

      ${section("Action", [
        "Suspected meningitis/encephalitis ‚Üí urgent emergency escalation NOW (local pathway)"
      ], "alt")}

      ${linksSection("Guidelines", [
        { label: "NICE CKS ‚Äì Meningitis (suspected)", href: "https://cks.nice.org.uk/topics/meningitis/" }
      ])}
    `,

    neuroredflags: `
      ${section("FAST RED FLAGS", [
        "Sudden severe (‚Äòthunderclap‚Äô) headache",
        "New focal neurology (weakness, speech/vision change)",
        "Reduced consciousness / persistent confusion",
        "Seizure with incomplete recovery",
        "Fever + neck stiffness / non-blanching rash",
        "Head injury + anticoagulation",
        "New headache with immunosuppression or cancer history"
      ], "danger")}
      <div class="mini-note">If concerned: follow local escalation pathways.</div>
    `
  };

  createWindow(titleFor(key), content[key] || "<div class='section'><h4>Not found</h4><p>Content not found.</p></div>");
}

/* Red flags */
function openRedFlags(topic) {
  const flags = {
    neuro: [
      "New focal neurology (weakness, speech/vision change)",
      "Reduced consciousness / persistent confusion",
      "Sudden severe headache (thunderclap)",
      "Seizure with incomplete recovery / repeated seizures",
      "Fever + neck stiffness / non-blanching rash",
      "Head injury + anticoagulation",
      "Sepsis features"
    ],
    headache: [
      "Thunderclap onset / maximal at start",
      "New focal neurology or reduced consciousness",
      "Fever/meningism or non-blanching rash",
      "Head injury / anticoagulation",
      "New headache >50 or change in pattern",
      "Triggered by exertion/sex/cough"
    ],
    seizure: [
      "Ongoing seizure activity / status features",
      "Repeated seizures without recovery",
      "Persistent reduced consciousness",
      "New focal neuro deficit",
      "Pregnancy, significant head injury, anticoagulation"
    ],
    stroke: [
      "FAST positive",
      "Time last known well uncertain but suspected stroke",
      "Reduced consciousness",
      "Severe headache with neuro deficit"
    ],
    dizzy: [
      "New focal neuro deficits",
      "Severe gait ataxia / cannot walk unaided",
      "New severe headache",
      "Persistent vomiting + neuro features"
    ],
    confusion: [
      "Reduced consciousness",
      "New focal neuro deficit",
      "Sepsis features",
      "Meningism/non-blanching rash",
      "Unsafe environment / safeguarding concern"
    ],
    meningitis: [
      "Non-blanching rash",
      "Reduced consciousness",
      "Seizure",
      "Sepsis features",
      "Rapid deterioration"
    ]
  };

  const list = flags[topic] || flags.neuro;

  const html = `
    <div class="section danger">
      <h4>FAST RED FLAGS</h4>
      <ul>
        ${list.map(x => `<li><strong>${x}</strong></li>`).join("")}
      </ul>
      <div class="mini-note">If concerned: follow local escalation pathways.</div>
    </div>
  `;

  createWindow("üö© Red Flags", html);
}

/* Titles */
function titleFor(key){
  const map = {
    comparisons: "Comparisons",
    headache: "Headache",
    seizure: "Seizure / First fit",
    stroke: "TIA / Stroke",
    dizzy: "Dizziness / Vertigo",
    confusion: "Acute Confusion",
    meningitis: "Meningitis / Encephalitis",
    neuroredflags: "Neuro Red Flags"
  };
  return map[key] || key;
}

/* ===== Persistent banner + first-visit modal logic ===== */
(function initDisclaimers(){
  // Banner dismiss
  const bannerKey = "pipc_disclaimer_banner_dismissed";
  const banner = document.getElementById("disclaimerBanner");
  const dismissBtn = document.getElementById("bannerDismissBtn");

  if (localStorage.getItem(bannerKey) === "1") {
    banner.style.display = "none";
  }
  dismissBtn.addEventListener("click", () => {
    localStorage.setItem(bannerKey, "1");
    banner.style.display = "none";
  });

  // First visit modal
  const firstVisitKey = "pipc_first_visit_ack";
  const firstOverlay = document.getElementById("firstVisitOverlay");
  const acknowledgeBtn = document.getElementById("acknowledgeBtn");

  function lockScroll(){ document.body.style.overflow = "hidden"; }
  function unlockScrollIfSafe(){
    const overlayOpen = overlay && overlay.style.display === "block";
    if (!overlayOpen) document.body.style.overflow = "";
  }

  if (localStorage.getItem(firstVisitKey) !== "1") {
    firstOverlay.style.display = "flex";
    lockScroll();
  }

  acknowledgeBtn.addEventListener("click", () => {
    localStorage.setItem(firstVisitKey, "1");
    firstOverlay.style.display = "none";
    unlockScrollIfSafe();
  });
})();
</script>

<!-- Persistent disclaimer banner -->
<div class="disclaimer-banner" id="disclaimerBanner" role="note" aria-label="Clinical disclaimer">
  <div>
    <strong>Clinical support only.</strong>
    This site is a quick reference tool and does not replace clinical judgement or current guidelines.
  </div>
  <div class="banner-actions">
    <button class="btn" id="bannerDismissBtn" type="button">Dismiss</button>
    <a class="btn" href="about.html">Read more</a>
  </div>
</div>

<!-- Site-wide footer -->
<footer class="site-footer" aria-label="Footer">
  <div class="site-footer-inner">
    <div>¬© Paramedics in Primary Care ¬∑ Quick reference only</div>
    <div><a href="about.html">About / Disclaimer</a></div>
  </div>
</footer>

<!-- First-visit modal -->
<div class="modal-overlay" id="firstVisitOverlay" role="dialog" aria-modal="true" aria-label="First visit disclaimer">
  <div class="modal">
    <div class="modal-head">Before you use this tool</div>
    <div class="modal-body">
      <p>This resource is designed as a quick-reference aid for same-day, sudden and serious presentations.</p>
      <ul>
        <li>It does <strong>not</strong> replace clinical judgement.</li>
        <li>It does <strong>not</strong> replace national/local guidance (e.g. NICE) or service protocols.</li>
        <li>Escalate and follow emergency pathways if concerned.</li>
      </ul>
    </div>
    <div class="modal-foot">
      <a class="btn" href="about.html">Read full disclaimer</a>
      <button class="btn" id="acknowledgeBtn" type="button">I understand</button>
    </div>
  </div>
</div>

</body>
</html>



